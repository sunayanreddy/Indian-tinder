{"version":3,"sources":["components/BrandLogo.tsx","components/TopNav.tsx","services/api.ts","pages/AuthPage.tsx","components/AvatarBadge.tsx","pages/ChatPage.tsx","components/MatchModal.tsx","components/SwipeCard.tsx","pages/DiscoverPage.tsx","pages/HomePage.tsx","pages/MatchesPage.tsx","pages/MyProfilePage.tsx","pages/OnboardingPage.tsx","pages/UserProfilePage.tsx","App.tsx","index.tsx"],"names":["BrandLogo","_ref","compact","_jsxs","className","concat","children","_jsx","TopNav","onLogout","location","useLocation","Link","pathname","to","onClick","API_BASE_URL","process","REACT_APP_API_URL","authToken","client","axios","create","baseURL","timeout","interceptors","request","use","config","headers","_objectSpread","Authorization","response","error","friendly","Error","getErrorMessage","fallback","_error$response","_error$response2","responseData","data","serverMessage","message","trim","status","Object","defineProperty","value","enumerable","configurable","Promise","reject","getProfile","async","get","updateProfile","put","payload","getMatches","getMessages","params","matchUserId","sendTyping","toUserId","isTyping","post","getApiErrorMessage","getApiErrorStatus","Number","defaultRegisterState","name","email","password","AuthPage","onAuthenticated","getInitialMode","URLSearchParams","window","search","mode","setMode","useState","setEmail","setPassword","setName","setError","loading","setLoading","googleClientId","REACT_APP_GOOGLE_CLIENT_ID","useEffect","scriptId","document","getElementById","script","createElement","src","defer","id","onload","googleApi","google","accounts","initialize","client_id","callback","result","idToken","loginWithGoogle","credential","token","user","err","container","innerHTML","renderButton","theme","size","shape","text","body","appendChild","submitLogin","login","submitRegister","register","type","onSubmit","event","preventDefault","onChange","e","target","placeholder","required","disabled","AVATAR_MAP","fox","emoji","bg","lotus","lion","falcon","panda","tiger","peacock","AvatarBadge","avatarKey","title","style","width","height","background","fontSize","Math","floor","ChatPage","userId","useParams","messages","setMessages","targetMatch","setTargetMatch","draft","setDraft","setIsTyping","privatePhotos","setPrivatePhotos","photoError","setPhotoError","loadChat","allMatches","chatMessages","all","matchedUser","find","match","canViewPrivatePhotos","photos","getPrivatePhotos","source","createEventsSource","tokenParam","encodeURIComponent","EventSource","addEventListener","raw","JSON","parse","fromUserId","prev","some","existing","typing","Boolean","_match$user","onerror","close","timeoutId","setTimeout","length","clearTimeout","send","sendMessage","grantAccess","grantPhotoAccess","sortedMessages","useMemo","sort","a","b","createdAt","localeCompare","messageCount","isEligibleToGrantPhotoAccess","hasGrantedPhotoAccess","map","Date","toLocaleTimeString","photo","alt","onKeyDown","key","MatchModal","onClose","role","SwipeCard","onLike","onPass","age","gender","replace","bio","occupation","education","lookingFor","relationshipGoal","interests","interest","DiscoverPage","profiles","setProfiles","setMatch","loadProfiles","users","discoverUsers","handleSwipe","targetUserId","action","swipeUser","filter","profile","matched","topProfile","HomePage","backgroundImage","MatchesPage","matches","setMatches","loadMatches","_match$lastMessage","lastMessage","matchId","normalizeGender","normalizeLifestyle","MyProfilePage","onUserUpdated","details","setDetails","saving","setSaving","setAge","setGender","setBio","setLocation","setInterests","setAvatarKey","setLookingFor","setRelationshipGoal","setOccupation","setEducation","heightCm","setHeightCm","drinking","setDrinking","smoking","setSmoking","religion","setReligion","languages","setLanguages","privatePhotosRaw","setPrivatePhotosRaw","load","getMyProfileDetails","join","interestList","split","item","languageList","updated","assign","min","max","rows","normalizeLookingFor","normalizeRelationshipGoal","OnboardingPage","onComplete","UserProfilePage","getUserProfileById","marginTop","App","setTokenState","localStorage","getItem","setUser","loadingUser","setLoadingUser","profileLoadError","setProfileLoadError","reloadTick","setReloadTick","setAuthToken","attempt","removeItem","resolve","restoreUser","authenticated","needsOnboarding","onboardingCompleted","setToken","nextToken","setItem","onOnboardingComplete","updatedUser","BrowserRouter","logout","Switch","Route","path","Redirect","nextUser","exact","ReactDOM","render","React","StrictMode"],"mappings":"qOAiBeA,MAX6BC,IAA0B,IAAzB,QAAEC,GAAU,GAAOD,EAC9D,OACEE,eAAA,OAAKC,UAAS,cAAAC,OAAgBH,EAAU,UAAY,IAAKI,SAAA,CACvDC,cAAA,QAAMH,UAAU,aAAa,cAAY,OAAME,SAAC,OAGhDC,cAAA,QAAMH,UAAU,iBAAgBE,SAAC,sBCsBxBE,MA1BuBP,IAAmB,IAAlB,SAAEQ,GAAUR,EACjD,MAAMS,EAAWC,cAEjB,OACER,eAAA,UAAQC,UAAU,UAASE,SAAA,CACzBC,cAAA,OAAKH,UAAU,QAAOE,SACpBC,cAACP,EAAS,CAACE,SAAO,MAEpBC,eAAA,OAAAG,SAAA,CACEC,cAACK,IAAI,CAACR,UAAiC,cAAtBM,EAASG,SAA2B,cAAgB,GAAIC,GAAG,YAAWR,SAAC,aAGxFC,cAACK,IAAI,CAACR,UAAiC,aAAtBM,EAASG,SAA0B,cAAgB,GAAIC,GAAG,WAAUR,SAAC,YAGtFC,cAACK,IAAI,CAACR,UAAiC,aAAtBM,EAASG,SAA0B,cAAgB,GAAIC,GAAG,WAAUR,SAAC,eAIxFC,cAAA,UAAQH,UAAU,gBAAgBW,QAASN,EAASH,SAAC,e,yBCX3D,MAAMU,EAAeC,mIAAYC,mBAAqB,4BACtD,IAAIC,EAAY,GAEhB,MAAMC,EAASC,IAAMC,OAAO,CAC1BC,QAASP,EACTQ,QAAS,MAGXJ,EAAOK,aAAaC,QAAQC,IAAIC,IAC1BT,IACFS,EAAOC,QAAOC,wBAAA,GACTF,EAAOC,SAAO,IACjBE,cAAc,UAAD1B,OAAYc,MAGtBS,IAwBTR,EAAOK,aAAaO,SAASL,IAC3BK,GAAYA,EACZC,IACE,MAAMC,EAAW,IAAIC,MAxBDC,EAACH,EAAYI,KAA8B,IAADC,EAAAC,EAChE,MAAMC,EAAoB,OAALP,QAAK,IAALA,GAAe,QAAVK,EAALL,EAAOD,gBAAQ,IAAAM,OAAV,EAALA,EAAiBG,KAChCC,EACHF,GAAgD,kBAAzBA,EAAaG,SAAwBH,EAAaG,SACzEH,GAA8C,kBAAvBA,EAAaP,OAAsBO,EAAaP,QAC/C,kBAAjBO,EAA4BA,EAAe,IACrD,MAA6B,kBAAlBE,GAA8BA,EAAcE,OAC9CF,EAGc,mBAAd,OAALT,QAAK,IAALA,OAAK,EAALA,EAAOU,SACF,sEAGuB,OAAvB,OAALV,QAAK,IAALA,GAAe,QAAVM,EAALN,EAAOD,gBAAQ,IAAAO,OAAV,EAALA,EAAiBM,QACZ,0DAGFR,GAMsBD,CAAgBH,EAAO,mBAMlD,OALAa,OAAOC,eAAeb,EAAU,SAAU,CACxCc,MAAOf,GAASA,EAAMD,SAAWC,EAAMD,SAASa,OAAS,EACzDI,YAAY,EACZC,cAAc,IAETC,QAAQC,OAAOlB,KAInB,MAkDMmB,EAAaC,gBACDlC,EAAOmC,IAAU,cACxBd,KAaLe,EAAgBF,gBACJlC,EAAOqC,IAAU,oBAAqBC,IAC7CjB,KAmBLkB,EAAaL,gBACDlC,EAAOmC,IAAoB,aAClCd,KAaLmB,EAAcN,gBACFlC,EAAOmC,IAAmB,YAAa,CAC5DM,OAAQ,CACNC,kBAGYrB,KAWLsB,EAAaT,MAAOU,EAAkBC,WAC1B7C,EAAO8C,KAAsB,UAAW,CAC7DF,WACAC,cAEcxB,KAkBL0B,EAAqBA,CAAClC,EAAYI,IACpC,OAALJ,QAAK,IAALA,KAAOU,SAAoC,kBAAlBV,EAAMU,QAC1BV,EAAMU,QAERN,EAGI+B,EAAqBnC,GACzBoC,QAAY,OAALpC,QAAK,IAALA,OAAK,EAALA,EAAOY,SAAU,GC1M3ByB,EAAsC,CAC1CC,KAAM,GACNC,MAAO,GACPC,SAAU,IA6LGC,MA1L2BzE,IAA0B,IAAzB,gBAAE0E,GAAiB1E,EAC5D,MAAM2E,EAAiBA,IAES,aADf,IAAIC,gBAAgBC,OAAOpE,SAASqE,QACrCxB,IAAI,QAAyB,WAAa,SAGnDyB,EAAMC,GAAWC,mBAA+BN,IAChDJ,EAAOW,GAAYD,mBAAS,KAC5BT,EAAUW,GAAeF,mBAAS,KAClCX,EAAMc,GAAWH,mBAAS,KAC1BjD,EAAOqD,GAAYJ,mBAAS,KAC5BK,EAASC,GAAcN,oBAAS,GAEjCO,EAAiBxE,mIAAYyE,4BAA8B,GAEjEC,oBAAU,KACRV,EAAQL,MACP,IAEHe,oBAAU,KACR,IAAKF,EACH,OAGF,MAAMG,EAAW,yBACjB,IAAKC,SAASC,eAAeF,GAAW,CACtC,MAAMG,EAASF,SAASG,cAAc,UACtCD,EAAOE,IAAM,yCACbF,EAAOzC,OAAQ,EACfyC,EAAOG,OAAQ,EACfH,EAAOI,GAAKP,EACZG,EAAOK,OAAS,KAEd,MAAMC,EAAYvB,OAAOwB,OACzB,GAAID,EAAW,CACbA,EAAUE,SAASJ,GAAGK,WAAW,CAC/BC,UAAWhB,EACXiB,SAAUpD,UACR,IACE,MAAMqD,ODqDSrD,iBACNlC,EAAO8C,KAAmB,eAAgB,CAAE0C,aACnDnE,KCvDmBoE,CAAgB7E,EAAS8E,YAC9CnC,EAAgBgC,EAAOI,MAAOJ,EAAOK,KACvC,CAAE,MAAOC,GACP3B,EAASnB,EAAmB8C,EAAK,uBACnC,KAGJ,MAAMC,EAAYrB,SAASC,eAAe,wBACtCoB,IACFA,EAAUC,UAAY,GACtBd,EAAUE,SAASJ,GAAGiB,aAAaF,EAAW,CAC5CG,MAAO,UACPC,KAAM,QACNC,MAAO,OACPC,KAAM,kBAGZ,GAEF3B,SAAS4B,KAAKC,YAAY3B,EAC5B,GACC,CAACN,EAAgBd,IAEpB,MAAMgD,EAAcrE,UAClBkC,GAAW,GACXF,EAAS,IACT,IACE,MAAMqB,ODqBSrD,OAAOkB,EAAeC,WAClBrD,EAAO8C,KAAmB,cAAe,CAAEM,QAAOC,cACzDhC,KCvBSmF,CAAMpD,EAAOC,GAClCE,EAAgBgC,EAAOI,MAAOJ,EAAOK,KACvC,CAAE,MAAOC,GACP3B,EAASnB,EAAmB8C,EAAK,gBACnC,CAAC,QACCzB,GAAW,EACb,GAGIqC,EAAiBvE,UACrBkC,GAAW,GACXF,EAAS,IAET,MAAM5B,EAAsB5B,wBAAA,GACvBwC,GAAoB,IACvBC,OACAC,QACAC,aAGF,IACE,MAAMkC,ODLYrD,iBACClC,EAAO8C,KAAmB,iBAAkBR,IACnDjB,KCGSqF,CAASpE,GAC9BiB,EAAgBgC,EAAOI,MAAOJ,EAAOK,KACvC,CAAE,MAAOC,GACP3B,EAASnB,EAAmB8C,EAAK,uBACnC,CAAC,QACCzB,GAAW,EACb,GAYF,OACEjF,cAAA,QAAMH,UAAU,cAAaE,SAC3BH,eAAA,WAASC,UAAU,aAAYE,SAAA,CAC7BH,eAAA,SAAOC,UAAU,YAAWE,SAAA,CAC1BC,cAACP,EAAS,IACVO,cAAA,MAAAD,SAAI,+CACJC,cAAA,KAAAD,SAAG,4GAGHH,eAAA,MAAIC,UAAU,gBAAeE,SAAA,CAC3BC,cAAA,MAAAD,SAAI,6BACJC,cAAA,MAAAD,SAAI,gDACJC,cAAA,MAAAD,SAAI,gDAIRH,eAAA,OAAKC,UAAU,aAAYE,SAAA,CACzBC,cAAA,MAAAD,SAAc,UAAT0E,EAAmB,eAAiB,wBACzCzE,cAAA,KAAAD,SAAG,oGACHH,eAAA,OAAKC,UAAU,cAAaE,SAAA,CAC1BC,cAAA,UACEH,UAAS,OAAAC,OAAkB,UAAT2E,EAAmB,WAAa,aAClD+C,KAAK,SACLhH,QAASA,IAAMkE,EAAQ,SAAS3E,SACjC,UAGDC,cAAA,UACEH,UAAS,OAAAC,OAAkB,aAAT2E,EAAsB,WAAa,aACrD+C,KAAK,SACLhH,QAASA,IAAMkE,EAAQ,YAAY3E,SACpC,gBAKHH,eAAA,QAAMC,UAAU,YAAY4H,SA7Cf1E,UACnB2E,EAAMC,iBACO,UAATlD,QAIE6C,UAHEF,KA0CiDrH,SAAA,CACvC,aAAT0E,GACCzE,cAAA,SACEyC,MAAOuB,EACP4D,SAAUC,GAAK/C,EAAQ+C,EAAEC,OAAOrF,OAChC+E,KAAK,OACLO,YAAY,YACZC,UAAQ,IAIZhI,cAAA,SACEyC,MAAOwB,EACP2D,SAAUC,GAAKjD,EAASiD,EAAEC,OAAOrF,OACjC+E,KAAK,QACLO,YAAY,QACZC,UAAQ,IAEVhI,cAAA,SACEyC,MAAOyB,EACP0D,SAAUC,GAAKhD,EAAYgD,EAAEC,OAAOrF,OACpC+E,KAAK,WACLO,YAAY,WACZC,UAAQ,IAGTtG,GAAS1B,cAAA,KAAGH,UAAU,aAAYE,SAAE2B,IAErC1B,cAAA,UAAQH,UAAU,eAAe2H,KAAK,SAASS,SAAUjD,EAAQjF,SAC9DiF,EAAU,iBAA4B,UAATP,EAAmB,QAAU,sBAI9DS,EACCtF,eAAA,OAAKC,UAAU,cAAaE,SAAA,CAC1BC,cAAA,KAAGH,UAAU,QAAOE,SAAC,4BACrBC,cAAA,OAAK4F,GAAG,4BAER,cChMd,MAAMsC,EAA4D,CAChEC,IAAK,CAAEC,MAAO,eAAMC,GAAI,WACxBC,MAAO,CAAEF,MAAO,eAAMC,GAAI,WAC1BE,KAAM,CAAEH,MAAO,eAAMC,GAAI,WACzBG,OAAQ,CAAEJ,MAAO,eAAMC,GAAI,WAC3BI,MAAO,CAAEL,MAAO,eAAMC,GAAI,WAC1BK,MAAO,CAAEN,MAAO,eAAMC,GAAI,WAC1BM,QAAS,CAAEP,MAAO,eAAMC,GAAI,YAiBfO,MAdiClJ,IAAqC,IAApC,UAAEmJ,EAAS,KAAE7E,EAAI,KAAE+C,EAAO,IAAIrH,EAC7E,MAAM2B,EAAS6G,EAAWW,IAAcX,EAAWC,IAEnD,OACEnI,cAAA,OACEH,UAAU,eACViJ,MAAK,GAAAhJ,OAAKkE,EAAI,aACd+E,MAAO,CAAEC,MAAOjC,EAAMkC,OAAQlC,EAAMmC,WAAY7H,EAAOgH,IAAKtI,SAE5DC,cAAA,QAAM+I,MAAO,CAAEI,SAAUC,KAAKC,MAAa,IAAPtC,IAAehH,SAAEsB,EAAO+G,WCuMnDkB,MA7M2B5J,IAAiB,IAAhB,OAAE6J,GAAQ7J,EACnD,MACM6D,EADciG,cACOjG,aAAe,IACnCkG,EAAUC,GAAe/E,mBAAwB,KACjDgF,EAAaC,GAAkBjF,mBAA8B,OAC7DkF,EAAOC,GAAYnF,mBAAS,KAC5BK,EAASC,GAAcN,oBAAS,IAChCjD,EAAOqD,GAAYJ,mBAAS,KAC5BjB,EAAUqG,GAAepF,oBAAS,IAClCqF,EAAeC,GAAoBtF,mBAAmB,KACtDuF,EAAYC,GAAiBxF,mBAAS,IAEvCyF,EAAWrH,UACfkC,GAAW,GACXF,EAAS,IACT,IACE,MAAOsF,EAAYC,SAAsB1H,QAAQ2H,IAAI,CAACnH,IAAcC,EAAYE,KAC1EiH,EAAcH,EAAWI,KAAKC,GAASA,EAAMjE,KAAKb,KAAOrC,IAAgB,KAO/E,GANKiH,GACHzF,EAAS,oBAEX6E,EAAeY,GACfd,EAAYY,GAEG,OAAXE,QAAW,IAAXA,KAAaG,qBACf,IACE,MAAMC,OHqHgB7H,iBACPlC,EAAOmC,IAAG,YAAAlD,OAAmCyD,EAAW,qBAC/DrB,KAAK0I,OGvHQC,CAAiBtH,GACtC0G,EAAiBW,GACjBT,EAAc,GAChB,CAAE,MAAOzD,GACPyD,EAAczD,aAAe9E,MAAQ8E,EAAItE,QAAU,gCACrD,MAEA6H,EAAiB,GAErB,CAAE,MAAOvD,GACP3B,EAAS2B,aAAe9E,MAAQ8E,EAAItE,QAAU,sBAChD,CAAC,QACC6C,GAAW,EACb,GAGFG,oBAAU,KACHgF,KACJ,CAAC7G,IAEJ6B,oBAAU,KACR,MAAM0F,EHIwBC,MAChC,MAAMC,EAAaC,mBAAmBrK,GACtC,OAAO,IAAIsK,YAAY,GAADpL,OAAIW,EAAY,kBAAAX,OAAiBkL,KGNtCD,GAoCf,OAlCAD,EAAOK,iBAAiB,UAAYzD,IAClC,MAAMtF,GHgIsBgJ,EGhIM1D,EAAMxF,KHiIxBmJ,KAAKC,MAAMF,IADCA,OG9HzBhJ,EAAQmJ,aAAehC,GAAUnH,EAAQqB,WAAaF,GACtDnB,EAAQmJ,aAAehI,GAAenB,EAAQqB,WAAa8F,IAG5DG,EAAY8B,GACNA,EAAKC,KAAKC,GAAYA,EAAS9F,KAAOxD,EAAQwD,IACzC4F,EAEF,IAAIA,EAAMpJ,MAKvB0I,EAAOK,iBAAiB,SAAWzD,IACjC,MAAMiE,GH2GqBP,EG3GK1D,EAAMxF,KH4GtBmJ,KAAKC,MAAMF,IADAA,MG1GvBO,EAAOJ,aAAehI,GACxBwG,EAAY6B,QAAQD,EAAOjI,aAI/BoH,EAAOK,iBAAiB,QAAUzD,IAAyB,IAADmE,EACxD,MAAMnB,GH8GoBU,EG9GI1D,EAAMxF,KH+GpBmJ,KAAKC,MAAMF,IADDA,OG7GjB,OAALV,QAAK,IAALA,GAAW,QAANmB,EAALnB,EAAOjE,YAAI,IAAAoF,OAAN,EAALA,EAAajG,MAAOrC,GACtBqG,EAAec,KAInBI,EAAOgB,QAAU,KACfhB,EAAOiB,SAGF,KACLjB,EAAOiB,UAER,CAACxI,EAAagG,IAEjBnE,oBAAU,KACR,MAAM4G,EAAYC,WAAW,KACtBzI,EAAWD,EAAasG,EAAMxH,OAAO6J,OAAS,IAClD,KAEH,MAAO,IAAMC,aAAaH,IACzB,CAACnC,EAAOtG,IAEX,MAAM6I,EAAOrJ,UACX,GAAK8G,EAAMxH,OAIX,SHwDuBU,OAAOU,EAAkBwD,WAC3BpG,EAAO8C,KAAkB,YAAa,CAC3DF,WACAwD,UAEc/E,KG5DNmK,CAAY9I,EAAasG,GAC/BC,EAAS,IACJtG,EAAWD,GAAa,GACxB6G,GACP,CAAE,MAAO1D,GACP3B,EAAS2B,aAAe9E,MAAQ8E,EAAItE,QAAU,yBAChD,GAGIkK,EAAcvJ,UAClB,SH0B4BA,iBACPlC,EAAO8C,KAAI,YAAA7D,OAA8ByD,EAAW,yBAC3DrB,KG3BNqK,CAAiBhJ,SACjB6G,GACR,CAAE,MAAO1D,GACPyD,EAAczD,aAAe9E,MAAQ8E,EAAItE,QAAU,+BACrD,GAGIoK,EAAiBC,kBACrB,IAAM,IAAIhD,GAAUiD,KAAK,CAACC,EAAGC,IAAMD,EAAEE,UAAUC,cAAcF,EAAEC,YAC/D,CAACpD,IAGH,OACE7J,eAAA,OAAKC,UAAU,wBAAuBE,SAAA,CACpCH,eAAA,OAAKC,UAAU,YAAWE,SAAA,CACxBC,cAAA,MAAAD,SAAK4J,EAAW,aAAA7J,OAAgB6J,EAAYlD,KAAKzC,MAAS,SAC1DpE,eAAA,OAAKC,UAAU,gBAAeE,SAAA,CAC5BC,cAACK,IAAI,CAACR,UAAU,gBAAgBU,GAAE,YAAAT,OAAcyD,GAAcxD,SAAC,iBAG/DC,cAACK,IAAI,CAACR,UAAU,gBAAgBU,GAAG,WAAUR,SAAC,eAMjD4J,GACC/J,eAAA,OAAKC,UAAU,cAAaE,SAAA,CAC1BC,cAAC4I,EAAW,CAACC,UAAWc,EAAYlD,KAAKoC,UAAW7E,KAAM2F,EAAYlD,KAAKzC,KAAM+C,KAAM,KACvFnH,eAAA,OAAAG,SAAA,CACEH,eAAA,KAAGC,UAAU,QAAOE,SAAA,CAAC,mBAAiB4J,EAAYoD,aAAa,kBAC7DpD,EAAYgB,sBACZ3K,cAAA,KAAGH,UAAU,QAAOE,SAAC,0EAEtB4J,EAAYqD,+BAAiCrD,EAAYsD,uBACxDjN,cAAA,UAAQH,UAAU,gBAAgBW,QAASA,KAAW8L,KAAcvM,SAAC,kCAQ7EC,cAAA,OAAKH,UAAU,qBAAoBE,SAAC,8DAInCiF,GAAWhF,cAAA,KAAAD,SAAG,4BACd2B,GAAS1B,cAAA,KAAGH,UAAU,aAAYE,SAAE2B,IAErC1B,cAAA,OAAKH,UAAU,cAAaE,SACzByM,EAAeU,IAAI9K,GAClBxC,eAAA,OAEEC,UAAS,kBAAAC,OAAoBsC,EAAQmJ,aAAehC,EAAS,OAAS,UAAWxJ,SAAA,CAEjFC,cAAA,KAAAD,SAAIqC,EAAQ6E,OACZjH,cAAA,QAAAD,SAAO,IAAIoN,KAAK/K,EAAQyK,WAAWO,yBAJ9BhL,EAAQwD,OASlBlC,GAAY9D,eAAA,KAAGC,UAAU,mBAAkBE,SAAA,EAAa,OAAX4J,QAAW,IAAXA,OAAW,EAAXA,EAAalD,KAAKzC,OAAQ,OAAO,oBAEnE,OAAX2F,QAAW,IAAXA,OAAW,EAAXA,EAAagB,uBACZ3K,cAAA,OAAKH,UAAU,qBAAoBE,SAChCiK,EAAckD,IAAIG,GACjBrN,cAAA,OAAiB0F,IAAK2H,EAAOC,IAAI,kBAAkBzN,UAAU,iBAAnDwN,MAIfnD,GAAclK,cAAA,KAAGH,UAAU,aAAYE,SAAEmK,IAE1CtK,eAAA,OAAKC,UAAU,iBAAgBE,SAAA,CAC7BC,cAAA,SACEyC,MAAOoH,EACPjC,SAAUF,GAASoC,EAASpC,EAAMI,OAAOrF,OACzCsF,YAAY,wBACZwF,UAAW7F,IACS,UAAdA,EAAM8F,KACHpB,OAIXpM,cAAA,UAAQH,UAAU,eAAeW,QAASA,KAAW4L,KAAOrM,SAAC,gBC/LtD0N,MAlB+B/N,IAAyB,IAAxB,MAAEgL,EAAK,QAAEgD,GAAShO,EAC/D,OACEM,cAAA,OAAKH,UAAU,UAAU8N,KAAK,SAAS,aAAW,OAAM5N,SACtDH,eAAA,OAAKC,UAAU,QAAOE,SAAA,CACpBC,cAAA,MAAAD,SAAI,iBACJC,cAAC4I,EAAW,CAACC,UAAW6B,EAAMjE,KAAKoC,UAAW7E,KAAM0G,EAAMjE,KAAKzC,KAAM+C,KAAM,MAC3EnH,eAAA,KAAAG,SAAA,CAAG,WACOC,cAAA,UAAAD,SAAS2K,EAAMjE,KAAKzC,OAAc,wBAE5ChE,cAAA,KAAGH,UAAU,QAAOE,SAAC,yEACrBC,cAAA,UAAQH,UAAU,eAAeW,QAASkN,EAAQ3N,SAAC,mBCoC5C6N,MA5C6BlO,IAA+B,IAA9B,KAAE+G,EAAI,OAAEoH,EAAM,OAAEC,GAAQpO,EACnE,OACEE,eAAA,WAASC,UAAU,eAAcE,SAAA,CAC/BH,eAAA,OAAKC,UAAU,eAAcE,SAAA,CAC3BC,cAAC4I,EAAW,CAACC,UAAWpC,EAAKoC,UAAW7E,KAAMyC,EAAKzC,KAAM+C,KAAM,MAC/D/G,cAAA,KAAGH,UAAU,QAAOE,SAAC,+DAEvBH,eAAA,OAAKC,UAAU,eAAcE,SAAA,CAC3BH,eAAA,MAAAG,SAAA,CACG0G,EAAKzC,KAAK,KAAGyC,EAAKsH,OAErBnO,eAAA,KAAGC,UAAU,mBAAkBE,SAAA,CAC5B0G,EAAKtG,SAAS,SAAIsG,EAAKuH,OAAOC,QAAQ,IAAK,QAE9CjO,cAAA,KAAAD,SAAI0G,EAAKyH,KAAO,gBAChBtO,eAAA,KAAGC,UAAU,QAAOE,SAAA,CACjB0G,EAAK0H,WAAW,SAAI1H,EAAK2H,aAE5BxO,eAAA,KAAGC,UAAU,QAAOE,SAAA,CAAC,eACN0G,EAAK4H,WAAWJ,QAAQ,IAAK,KAAK,eAAUxH,EAAK6H,iBAAiBL,QAAQ,IAAK,QAE9FjO,cAAA,OAAKH,UAAU,UAASE,SACrB0G,EAAK8H,UAAUrB,IAAIsB,GAClBxO,cAAA,QAAMH,UAAU,MAAKE,SAClByO,GADwBA,MAK/BxO,cAACK,IAAI,CAACR,UAAU,gBAAgBU,GAAE,YAAAT,OAAc2G,EAAKb,IAAK7F,SAAC,iBAG3DH,eAAA,OAAKC,UAAU,aAAYE,SAAA,CACzBC,cAAA,UAAQH,UAAU,eAAeW,QAASsN,EAAO/N,SAAC,SAGlDC,cAAA,UAAQH,UAAU,eAAeW,QAASqN,EAAO9N,SAAC,mBCkB7C0O,MA1DgBA,KAC7B,MAAOC,EAAUC,GAAehK,mBAAiB,KAC1CK,EAASC,GAAcN,oBAAS,IAChCjD,EAAOqD,GAAYJ,mBAAS,KAC5B+F,EAAOkE,GAAYjK,mBAA8B,MAElDkK,EAAe9L,UACnBkC,GAAW,GACXF,EAAS,IACT,IACE,MAAM+J,ON0HiB/L,iBACJlC,EAAOmC,IAAY,oBAC1Bd,KM5HQ6M,GACpBJ,EAAYG,EACd,CAAE,MAAOpI,GACP3B,EAAS2B,aAAe9E,MAAQ8E,EAAItE,QAAU,0BAChD,CAAC,QACC6C,GAAW,EACb,GAGFG,oBAAU,KACHyJ,KACJ,IAEH,MAAMG,EAAcjM,MAAOkM,EAAsBC,KAC/C,IACE,MAAM9I,ONgHarD,OACvBkM,EACAC,WAEuBrO,EAAO8C,KAAoB,UAAW,CAC3DsL,eACAC,YAEchN,KMxHSiN,CAAUF,EAAcC,GAC7CP,EAAYnD,GAAQA,EAAK4D,OAAOC,GAAWA,EAAQzJ,KAAOqJ,IACtD7I,EAAOkJ,SAAWlJ,EAAOsE,OAC3BkE,EAASxI,EAAOsE,MAEpB,CAAE,MAAOhE,GACP3B,EAAS2B,aAAe9E,MAAQ8E,EAAItE,QAAU,eAChD,GAGImN,EAAab,EAAS,GAE5B,OACE9O,eAAA,OAAKC,UAAU,aAAYE,SAAA,CACzBC,cAAA,MAAAD,SAAI,aACHiF,GAAWhF,cAAA,KAAAD,SAAG,wBACd2B,GAAS1B,cAAA,KAAGH,UAAU,aAAYE,SAAE2B,KAEnCsD,IAAYuK,GAAcvP,cAAA,KAAAD,SAAG,gDAE9BwP,GACCvP,cAAC4N,EAAS,CACRnH,KAAM8I,EACNzB,OAAQA,IAAMkB,EAAYO,EAAW3J,GAAI,QACzCiI,OAAQA,IAAMmB,EAAYO,EAAW3J,GAAI,UAI5C8E,GAAS1K,cAACyN,EAAU,CAAC/C,MAAOA,EAAOgD,QAASA,IAAMkB,EAAS,YCsBnDY,MA7EYA,IAOvB5P,eAAA,QAAMC,UAAU,eAAcE,SAAA,CAC5BH,eAAA,UAAQC,UAAU,iBAAgBE,SAAA,CAChCC,cAAA,OAAKH,UAAU,gBAAeE,SAC5BC,cAACP,EAAS,MAEZG,eAAA,OAAKC,UAAU,kBAAiBE,SAAA,CAC9BC,cAACK,IAAI,CAACR,UAAU,gBAAgBU,GAAG,mBAAkBR,SAAC,UAGtDC,cAACK,IAAI,CAACR,UAAU,eAAeU,GAAG,sBAAqBR,SAAC,kBAM5DH,eAAA,WAASC,UAAU,eAAcE,SAAA,CAC/BH,eAAA,OAAKC,UAAU,eAAcE,SAAA,CAC3BC,cAAA,KAAGH,UAAU,iBAAgBE,SAAC,gDAC9BC,cAAA,MAAAD,SAAI,gDACJC,cAAA,KAAAD,SAAG,2HAIHH,eAAA,OAAKC,UAAU,kBAAiBE,SAAA,CAC9BC,cAACK,IAAI,CAACR,UAAU,eAAeU,GAAG,sBAAqBR,SAAC,iBAGxDC,cAACK,IAAI,CAACR,UAAU,gBAAgBU,GAAG,mBAAkBR,SAAC,yBAIxDH,eAAA,OAAKC,UAAU,gBAAeE,SAAA,CAC5BH,eAAA,OAAKC,UAAU,YAAWE,SAAA,CACxBC,cAAA,MAAAD,SAAI,kBACJC,cAAA,KAAAD,SAAG,mEAELH,eAAA,OAAKC,UAAU,YAAWE,SAAA,CACxBC,cAAA,MAAAD,SAAI,yBACJC,cAAA,KAAAD,SAAG,8DAITC,cAAA,OAAKH,UAAU,iBAAiBkJ,MAhDd,CACtB0G,gBACE,qGA8C0D9B,KAAK,MAAM,aAAW,yBAGhF/N,eAAA,WAASC,UAAU,eAAcE,SAAA,CAC/BH,eAAA,WAASC,UAAU,eAAcE,SAAA,CAC/BC,cAAA,MAAAD,SAAI,wBACJC,cAAA,KAAAD,SAAG,qHAKLH,eAAA,WAASC,UAAU,eAAcE,SAAA,CAC/BC,cAAA,MAAAD,SAAI,wBACJC,cAAA,KAAAD,SAAG,0GAILH,eAAA,WAASC,UAAU,eAAcE,SAAA,CAC/BC,cAAA,MAAAD,SAAI,uBACJC,cAAA,KAAAD,SAAG,kHCNE2P,MA5DeA,KAC5B,MAAOC,EAASC,GAAcjL,mBAAyB,KAChDK,EAASC,GAAcN,oBAAS,IAChCjD,EAAOqD,GAAYJ,mBAAS,IAE7BkL,EAAc9M,UAClBkC,GAAW,GACXF,EAAS,IACT,IACE,MAAM7C,QAAakB,IACnBwM,EAAW1N,EACb,CAAE,MAAOwE,GACP3B,EAAS2B,aAAe9E,MAAQ8E,EAAItE,QAAU,yBAChD,CAAC,QACC6C,GAAW,EACb,GAOF,OAJAG,oBAAU,KACHyK,KACJ,IAGDjQ,eAAA,OAAKC,UAAU,aAAYE,SAAA,CACzBH,eAAA,OAAKC,UAAU,YAAWE,SAAA,CACxBC,cAAA,MAAAD,SAAI,gBACJC,cAAA,UAAQH,UAAU,gBAAgBW,QAASA,KAAWqP,KAAc9P,SAAC,eAKtEiF,GAAWhF,cAAA,KAAAD,SAAG,gCACd2B,GAAS1B,cAAA,KAAGH,UAAU,aAAYE,SAAE2B,KAEnCsD,GAA8B,IAAnB2K,EAAQzD,QAAgBlM,cAAA,KAAAD,SAAG,4CAExCC,cAAA,OAAKH,UAAU,aAAYE,SACxB4P,EAAQzC,IAAIxC,IAAK,IAAAoF,EAAA,OAChBlQ,eAAA,OAAKC,UAAU,aAAYE,SAAA,CACzBC,cAAC4I,EAAW,CAACC,UAAW6B,EAAMjE,KAAKoC,UAAW7E,KAAM0G,EAAMjE,KAAKzC,KAAM+C,KAAM,KAC3EnH,eAAA,OAAAG,SAAA,CACEC,cAAA,MAAAD,SAAK2K,EAAMjE,KAAKzC,OAChBhE,cAAA,KAAAD,UAAqB,QAAjB+P,EAAApF,EAAMqF,mBAAW,IAAAD,OAAA,EAAjBA,EAAmB7I,OAAQ,mCAC/BrH,eAAA,SAAOC,UAAU,QAAOE,SAAA,CAAC,aAAW2K,EAAMqC,gBAC1CnN,eAAA,OAAKC,UAAU,gBAAeE,SAAA,CAC5BC,cAACK,IAAI,CAACR,UAAU,gBAAgBU,GAAE,YAAAT,OAAc4K,EAAMjE,KAAKb,IAAK7F,SAAC,iBAGjEC,cAACK,IAAI,CAACR,UAAU,eAAeU,GAAE,SAAAT,OAAW4K,EAAMjE,KAAKb,IAAK7F,SAAC,sBAVlC2K,EAAMsF,iBCnCjD,MAAMC,EAAmBxN,IACvB,OAAQA,GACN,IAAK,MACH,MAAO,MACT,IAAK,QACH,MAAO,QACT,IAAK,aACH,MAAO,aACT,IAAK,QACH,MAAO,QACT,QACE,MAAO,mBA2BPyN,EAAsBzN,IAC1B,OAAQA,GACN,IAAK,QACL,IAAK,eACL,IAAK,WACL,IAAK,YACH,OAAOA,EACT,QACE,MAAO,mBA6NE0N,MAzNqCzQ,IAAwB,IAAvB,cAAE0Q,GAAe1Q,EACpE,MAAO2Q,EAASC,GAAc3L,mBAAkC,OACzDK,EAASC,GAAcN,oBAAS,IAChC4L,EAAQC,GAAa7L,oBAAS,IAC9BjD,EAAOqD,GAAYJ,mBAAS,KAE5BX,EAAMc,GAAWH,mBAAS,KAC1BoJ,EAAK0C,GAAU9L,mBAAS,KACxBqJ,EAAQ0C,GAAa/L,mBAAS,mBAC9BuJ,EAAKyC,GAAUhM,mBAAS,KACxBxE,EAAUyQ,GAAejM,mBAAS,KAClC4J,EAAWsC,GAAgBlM,mBAAS,KACpCkE,EAAWiI,GAAgBnM,mBAAS,QACpC0J,EAAY0C,GAAiBpM,mBAAqB,mBAClD2J,EAAkB0C,GAAuBrM,mBAA2B,cACpEwJ,EAAY8C,GAAiBtM,mBAAS,KACtCyJ,EAAW8C,GAAgBvM,mBAAS,KACpCwM,EAAUC,GAAezM,mBAAS,MAClC0M,EAAUC,GAAe3M,mBAAyB,mBAClD4M,EAASC,GAAc7M,mBAAyB,mBAChD8M,EAAUC,GAAe/M,mBAAS,KAClCgN,EAAWC,GAAgBjN,mBAAS,KACpCkN,EAAkBC,GAAuBnN,mBAAS,IAEnDoN,EAAOhP,UACXkC,GAAW,GACXF,EAAS,IACT,IACE,MAAMtD,OToCuBsB,iBACVlC,EAAOmC,IAAsB,sBACpCd,KStCW8P,GACvB1B,EAAW7O,GACXqD,EAAQrD,EAASgF,KAAKzC,MAAQ,IAC9ByM,EAAOhP,EAASgF,KAAKsH,KAAO,IAC5B2C,EAAUjP,EAASgF,KAAKuH,QAAU,kBAClC2C,EAAOlP,EAASgF,KAAKyH,KAAO,IAC5B0C,EAAYnP,EAASgF,KAAKtG,UAAY,IACtC0Q,GAAcpP,EAASgF,KAAK8H,WAAa,IAAI0D,KAAK,OAClDnB,EAAarP,EAASgF,KAAKoC,WAAa,OACxCkI,EAActP,EAASgF,KAAK4H,YAAc,kBAC1C2C,EAAoBvP,EAASgF,KAAK6H,kBAAoB,aACtD2C,EAAcxP,EAASgF,KAAK0H,YAAc,IAC1C+C,EAAazP,EAASgF,KAAK2H,WAAa,IACxCgD,EAAY3P,EAASgF,KAAK0K,UAAY,KACtCG,EAAY7P,EAASgF,KAAK4K,UAAY,kBACtCG,EAAW/P,EAASgF,KAAK8K,SAAW,kBACpCG,EAAYjQ,EAASgF,KAAKgL,UAAY,IACtCG,GAAcnQ,EAASgF,KAAKkL,WAAa,IAAIM,KAAK,OAClDH,GAAqBrQ,EAASuI,eAAiB,IAAIiI,KAAK,MAC1D,CAAE,MAAOvL,GACP3B,EAASnB,EAAmB8C,EAAK,0BACnC,CAAC,QACCzB,GAAW,EACb,GAGFG,oBAAU,KACH2M,KACJ,IA+CH,OAAI/M,EACKhF,cAAA,OAAKH,UAAU,aAAYE,SAACC,cAAA,KAAAD,SAAG,8BAItCH,eAAA,OAAKC,UAAU,aAAYE,SAAA,CACzBC,cAAA,OAAKH,UAAU,YAAWE,SACxBC,cAAA,MAAAD,SAAI,iBAELsQ,GACCzQ,eAAA,OAAKC,UAAU,cAAaE,SAAA,CAC1BC,cAAC4I,EAAW,CAACC,UAAWA,EAAW7E,KAAMA,EAAM+C,KAAM,KACrDnH,eAAA,OAAAG,SAAA,CACEC,cAAA,KAAGH,UAAU,QAAOE,SAAEsQ,EAAQpM,QAC9BjE,cAAA,KAAGH,UAAU,QAAOE,SAAC,wDAK3BH,eAAA,QAAMC,UAAU,YAAY4H,SAhEnB1E,UACX2E,EAAMC,iBACN6I,GAAU,GACVzL,EAAS,IACT,IACE,MAAMmN,EAAe3D,EAClB4D,MAAM,KACNjF,IAAIkF,GAAQA,EAAK/P,QACjB+M,OAAOxD,SACJyG,EAAeV,EAClBQ,MAAM,KACNjF,IAAIkF,GAAQA,EAAK/P,QACjB+M,OAAOxD,SAEJ0G,QAAgBrP,EAAc,CAClCe,OACA+J,MACAC,OAAQiC,EAAgBjC,GACxBE,MACA/N,WACAoO,UAAW2D,EACXrJ,YACAwF,aACAC,mBACAH,aACAC,YACA+C,WACAE,WACAE,UACAE,WACAE,UAAWU,EACXrI,cAAe6H,EACZM,MAAM,MACNjF,IAAIkF,GAAQA,EAAK/P,QACjB+M,OAAOxD,WAEZwE,EAAckC,GACd/N,OAAOpE,SAASoS,OAAO,YACzB,CAAE,MAAO7L,GACP3B,EAASnB,EAAmB8C,EAAK,0BACnC,CAAC,QACC8J,GAAU,EACZ,GAsB6CzQ,SAAA,CACzCC,cAAA,SAAOyC,MAAOuB,EAAM4D,SAAUC,GAAK/C,EAAQ+C,EAAEC,OAAOrF,OAAQsF,YAAY,OAAOC,UAAQ,IACvFpI,eAAA,OAAKC,UAAU,WAAUE,SAAA,CACvBC,cAAA,SAAOwH,KAAK,SAASgL,IAAK,GAAIC,IAAK,GAAIhQ,MAAOsL,EAAKnG,SAAUC,GAAK4I,EAAO3M,OAAO+D,EAAEC,OAAOrF,QAASuF,UAAQ,IAC1GpI,eAAA,UAAQ6C,MAAOuL,EAAQpG,SAAUC,GAAK6I,EAAU7I,EAAEC,OAAOrF,OAAO1C,SAAA,CAC9DC,cAAA,UAAQyC,MAAM,MAAK1C,SAAC,QACpBC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,UACtBC,cAAA,UAAQyC,MAAM,aAAY1C,SAAC,eAC3BC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,UACtBC,cAAA,UAAQyC,MAAM,iBAAgB1C,SAAC,4BAGnCC,cAAA,SAAOyC,MAAOtC,EAAUyH,SAAUC,GAAK+I,EAAY/I,EAAEC,OAAOrF,OAAQsF,YAAY,WAAWC,UAAQ,IACnGhI,cAAA,YAAUyC,MAAOyL,EAAKtG,SAAUC,GAAK8I,EAAO9I,EAAEC,OAAOrF,OAAQiQ,KAAM,EAAG3K,YAAY,MAAMC,UAAQ,IAChGpI,eAAA,OAAKC,UAAU,WAAUE,SAAA,CACvBH,eAAA,UAAQ6C,MAAO4L,EAAYzG,SAAUC,GAAKkJ,EA5KvBtO,KAC3B,OAAQA,GACN,IAAK,MACL,IAAK,QACL,IAAK,aACL,IAAK,WACH,OAAOA,EACT,QACE,MAAO,mBAoKqDkQ,CAAoB9K,EAAEC,OAAOrF,QAAQ1C,SAAA,CAC3FC,cAAA,UAAQyC,MAAM,MAAK1C,SAAC,oBACpBC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,sBACtBC,cAAA,UAAQyC,MAAM,aAAY1C,SAAC,2BAC3BC,cAAA,UAAQyC,MAAM,WAAU1C,SAAC,yBACzBC,cAAA,UAAQyC,MAAM,iBAAgB1C,SAAC,yBAEjCH,eAAA,UACE6C,MAAO6L,EACP1G,SAAUC,GAAKmJ,EAzKQvO,KACjC,OAAQA,GACN,IAAK,aACL,IAAK,WACL,IAAK,aACH,OAAOA,EACT,QACE,MAAO,cAkKkCmQ,CAA0B/K,EAAEC,OAAOrF,QAAQ1C,SAAA,CAE9EC,cAAA,UAAQyC,MAAM,YAAW1C,SAAC,2BAC1BC,cAAA,UAAQyC,MAAM,aAAY1C,SAAC,sBAC3BC,cAAA,UAAQyC,MAAM,WAAU1C,SAAC,aACzBC,cAAA,UAAQyC,MAAM,aAAY1C,SAAC,2BAG/BH,eAAA,OAAKC,UAAU,WAAUE,SAAA,CACvBC,cAAA,SAAOyC,MAAO0L,EAAYvG,SAAUC,GAAKoJ,EAAcpJ,EAAEC,OAAOrF,OAAQsF,YAAY,aAAaC,UAAQ,IACzGhI,cAAA,SAAOyC,MAAO2L,EAAWxG,SAAUC,GAAKqJ,EAAarJ,EAAEC,OAAOrF,OAAQsF,YAAY,YAAYC,UAAQ,OAExGpI,eAAA,OAAKC,UAAU,WAAUE,SAAA,CACvBC,cAAA,SACEwH,KAAK,SACLgL,IAAK,IACLC,IAAK,IACLhQ,MAAO0O,EACPvJ,SAAUC,GAAKuJ,EAAYtN,OAAO+D,EAAEC,OAAOrF,QAC3CsF,YAAY,cACZC,UAAQ,IAEVhI,cAAA,SAAOyC,MAAOgP,EAAU7J,SAAUC,GAAK6J,EAAY7J,EAAEC,OAAOrF,OAAQsF,YAAY,WAAWC,UAAQ,OAErGpI,eAAA,OAAKC,UAAU,WAAUE,SAAA,CACvBH,eAAA,UAAQ6C,MAAO4O,EAAUzJ,SAAUC,GAAKyJ,EAAYpB,EAAmBrI,EAAEC,OAAOrF,QAAQ1C,SAAA,CACtFC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,oBACtBC,cAAA,UAAQyC,MAAM,eAAc1C,SAAC,2BAC7BC,cAAA,UAAQyC,MAAM,WAAU1C,SAAC,uBACzBC,cAAA,UAAQyC,MAAM,YAAW1C,SAAC,wBAC1BC,cAAA,UAAQyC,MAAM,iBAAgB1C,SAAC,mCAEjCH,eAAA,UAAQ6C,MAAO8O,EAAS3J,SAAUC,GAAK2J,EAAWtB,EAAmBrI,EAAEC,OAAOrF,QAAQ1C,SAAA,CACpFC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,mBACtBC,cAAA,UAAQyC,MAAM,eAAc1C,SAAC,0BAC7BC,cAAA,UAAQyC,MAAM,WAAU1C,SAAC,sBACzBC,cAAA,UAAQyC,MAAM,YAAW1C,SAAC,uBAC1BC,cAAA,UAAQyC,MAAM,iBAAgB1C,SAAC,qCAGnCC,cAAA,SAAOyC,MAAO8L,EAAW3G,SAAUC,GAAKgJ,EAAahJ,EAAEC,OAAOrF,OAAQsF,YAAY,8BAA8BC,UAAQ,IACxHhI,cAAA,SACEyC,MAAOkP,EACP/J,SAAUC,GAAK+J,EAAa/J,EAAEC,OAAOrF,OACrCsF,YAAY,qCACZC,UAAQ,IAEVpI,eAAA,UAAQ6C,MAAOoG,EAAWjB,SAAUC,GAAKiJ,EAAajJ,EAAEC,OAAOrF,OAAO1C,SAAA,CACpEC,cAAA,UAAQyC,MAAM,MAAK1C,SAAC,QACpBC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,UACtBC,cAAA,UAAQyC,MAAM,OAAM1C,SAAC,SACrBC,cAAA,UAAQyC,MAAM,SAAQ1C,SAAC,WACvBC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,UACtBC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,UACtBC,cAAA,UAAQyC,MAAM,UAAS1C,SAAC,eAE1BC,cAAA,YACEyC,MAAOoP,EACPjK,SAAUC,GAAKiK,EAAoBjK,EAAEC,OAAOrF,OAC5CiQ,KAAM,EACN3K,YAAY,sCAEbrG,GAAS1B,cAAA,KAAGH,UAAU,aAAYE,SAAE2B,IACrC1B,cAAA,UAAQH,UAAU,eAAe2H,KAAK,SAASS,SAAUsI,EAAOxQ,SAC7DwQ,EAAS,YAAc,wBCpQlC,MAAMN,EAAmBxN,IACvB,OAAQA,GACN,IAAK,MACH,MAAO,MACT,IAAK,QACH,MAAO,QACT,IAAK,aACH,MAAO,aACT,IAAK,QACH,MAAO,QACT,QACE,MAAO,mBA2BPyN,EAAsBzN,IAC1B,OAAQA,GACN,IAAK,QACL,IAAK,eACL,IAAK,WACL,IAAK,YACH,OAAOA,EACT,QACE,MAAO,mBAuMEoQ,MAnMuCnT,IAA2B,IAA1B,KAAE+G,EAAI,WAAEqM,GAAYpT,EACzE,MAAOsE,EAAMc,GAAWH,mBAAS8B,EAAKzC,MAAQ,KACvC+J,EAAK0C,GAAU9L,mBAAS8B,EAAKsH,KAAO,KACpCC,EAAQ0C,GAAa/L,mBAAiB8B,EAAKuH,QAAU,mBACrDE,EAAKyC,GAAUhM,mBAAS8B,EAAKyH,KAAO,KACpC/N,EAAUyQ,GAAejM,mBAAS8B,EAAKtG,UAAY,KACnDoO,EAAWsC,GAAgBlM,oBAAU8B,EAAK8H,WAAa,IAAI0D,KAAK,QAChE5D,EAAY0C,GAAiBpM,mBAAqB8B,EAAK4H,YAAc,mBACrEC,EAAkB0C,GAAuBrM,mBAC9C8B,EAAK6H,kBAAoB,cAEpBH,EAAY8C,GAAiBtM,mBAAS8B,EAAK0H,YAAc,KACzDC,EAAW8C,GAAgBvM,mBAAS8B,EAAK2H,WAAa,KACtD+C,EAAUC,GAAezM,mBAAS8B,EAAK0K,UAAY,MACnDE,EAAUC,GAAe3M,mBAAyB8B,EAAK4K,UAAY,mBACnEE,EAASC,GAAc7M,mBAAyB8B,EAAK8K,SAAW,mBAChEE,EAAUC,GAAe/M,mBAAS8B,EAAKgL,UAAY,KACnDE,EAAWC,GAAgBjN,oBAAU8B,EAAKkL,WAAa,IAAIM,KAAK,QAChEpJ,EAAWiI,GAAgBnM,mBAAS8B,EAAKoC,WAAa,QACtDnH,EAAOqD,GAAYJ,mBAAS,KAC5BK,EAASC,GAAcN,oBAAS,GAuDvC,OACE3E,cAAA,QAAMH,UAAU,cAAaE,SAC3BH,eAAA,WAASC,UAAU,aAAYE,SAAA,CAC7BC,cAAA,MAAAD,SAAI,0BACJC,cAAA,KAAAD,SAAG,sGAEHH,eAAA,QAAMC,UAAU,YAAY4H,SA3DnB1E,UACb2E,EAAMC,iBACN5C,EAAS,IACTE,GAAW,GAEX,MAAMiN,EAAe3D,EAClB4D,MAAM,KACNjF,IAAIkF,GAAQA,EAAK/P,QACjB+M,OAAOxD,SACJyG,EAAeV,EAClBQ,MAAM,KACNjF,IAAIkF,GAAQA,EAAK/P,QACjB+M,OAAOxD,SAEV,GAAIsG,EAAahG,OAAS,EAGxB,OAFAnH,EAAS,yCACTE,GAAW,GAGb,GAAIoN,EAAanG,OAAS,EAGxB,OAFAnH,EAAS,wCACTE,GAAW,GAIb,IACE,MAAMqN,QAAgBrP,EAAc,CAClCe,OACA+J,MACAC,OAAQiC,EAAgBjC,GACxBE,MACA/N,WACAoO,UAAW2D,EACXrJ,YACAwF,aACAC,mBACAH,aACAC,YACA+C,WACAE,WACAE,UACAE,WACAE,UAAWU,EACXrI,cAAe,KAEjB8I,EAAWR,EACb,CAAE,MAAO5L,GACP3B,EAAS2B,aAAe9E,MAAQ8E,EAAItE,QAAU,yBAChD,CAAC,QACC6C,GAAW,EACb,GASiDlF,SAAA,CAC3CC,cAAA,SAAOyC,MAAOuB,EAAM4D,SAAUC,GAAK/C,EAAQ+C,EAAEC,OAAOrF,OAAQsF,YAAY,OAAOC,UAAQ,IACvFpI,eAAA,OAAKC,UAAU,WAAUE,SAAA,CACvBC,cAAA,SACEwH,KAAK,SACLgL,IAAK,GACLC,IAAK,GACLhQ,MAAOsL,EACPnG,SAAUC,GAAK4I,EAAO3M,OAAO+D,EAAEC,OAAOrF,QACtCsF,YAAY,MACZC,UAAQ,IAEVpI,eAAA,UAAQ6C,MAAOuL,EAAQpG,SAAUC,GAAK6I,EAAU7I,EAAEC,OAAOrF,OAAO1C,SAAA,CAC9DC,cAAA,UAAQyC,MAAM,MAAK1C,SAAC,QACpBC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,UACtBC,cAAA,UAAQyC,MAAM,aAAY1C,SAAC,eAC3BC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,UACtBC,cAAA,UAAQyC,MAAM,iBAAgB1C,SAAC,4BAGnCH,eAAA,OAAKC,UAAU,WAAUE,SAAA,CACvBH,eAAA,UAAQ6C,MAAO4L,EAAYzG,SAAUC,GAAKkJ,EAzIzBtO,KAC3B,OAAQA,GACN,IAAK,MACL,IAAK,QACL,IAAK,aACL,IAAK,WACH,OAAOA,EACT,QACE,MAAO,mBAiIuDkQ,CAAoB9K,EAAEC,OAAOrF,QAAQ1C,SAAA,CAC3FC,cAAA,UAAQyC,MAAM,MAAK1C,SAAC,oBACpBC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,sBACtBC,cAAA,UAAQyC,MAAM,aAAY1C,SAAC,2BAC3BC,cAAA,UAAQyC,MAAM,WAAU1C,SAAC,yBACzBC,cAAA,UAAQyC,MAAM,iBAAgB1C,SAAC,yBAEjCH,eAAA,UACE6C,MAAO6L,EACP1G,SAAUC,GAAKmJ,EAtIMvO,KACjC,OAAQA,GACN,IAAK,aACL,IAAK,WACL,IAAK,aACH,OAAOA,EACT,QACE,MAAO,cA+HoCmQ,CAA0B/K,EAAEC,OAAOrF,QAAQ1C,SAAA,CAE9EC,cAAA,UAAQyC,MAAM,YAAW1C,SAAC,2BAC1BC,cAAA,UAAQyC,MAAM,aAAY1C,SAAC,sBAC3BC,cAAA,UAAQyC,MAAM,WAAU1C,SAAC,aACzBC,cAAA,UAAQyC,MAAM,aAAY1C,SAAC,2BAG/BC,cAAA,SAAOyC,MAAOtC,EAAUyH,SAAUC,GAAK+I,EAAY/I,EAAEC,OAAOrF,OAAQsF,YAAY,WAAWC,UAAQ,IACnGhI,cAAA,YAAUyC,MAAOyL,EAAKtG,SAAUC,GAAK8I,EAAO9I,EAAEC,OAAOrF,OAAQsF,YAAY,MAAM2K,KAAM,EAAG1K,UAAQ,IAChGpI,eAAA,OAAKC,UAAU,WAAUE,SAAA,CACvBC,cAAA,SACEyC,MAAO0L,EACPvG,SAAUC,GAAKoJ,EAAcpJ,EAAEC,OAAOrF,OACtCsF,YAAY,aACZC,UAAQ,IAEVhI,cAAA,SACEyC,MAAO2L,EACPxG,SAAUC,GAAKqJ,EAAarJ,EAAEC,OAAOrF,OACrCsF,YAAY,YACZC,UAAQ,OAGZpI,eAAA,OAAKC,UAAU,WAAUE,SAAA,CACvBC,cAAA,SACEwH,KAAK,SACLgL,IAAK,IACLC,IAAK,IACLhQ,MAAO0O,EACPvJ,SAAUC,GAAKuJ,EAAYtN,OAAO+D,EAAEC,OAAOrF,QAC3CsF,YAAY,cACZC,UAAQ,IAEVhI,cAAA,SAAOyC,MAAOgP,EAAU7J,SAAUC,GAAK6J,EAAY7J,EAAEC,OAAOrF,OAAQsF,YAAY,WAAWC,UAAQ,OAErGpI,eAAA,OAAKC,UAAU,WAAUE,SAAA,CACvBH,eAAA,UAAQ6C,MAAO4O,EAAUzJ,SAAUC,GAAKyJ,EAAYpB,EAAmBrI,EAAEC,OAAOrF,QAAQ1C,SAAA,CACtFC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,oBACtBC,cAAA,UAAQyC,MAAM,eAAc1C,SAAC,2BAC7BC,cAAA,UAAQyC,MAAM,WAAU1C,SAAC,uBACzBC,cAAA,UAAQyC,MAAM,YAAW1C,SAAC,wBAC1BC,cAAA,UAAQyC,MAAM,iBAAgB1C,SAAC,mCAEjCH,eAAA,UAAQ6C,MAAO8O,EAAS3J,SAAUC,GAAK2J,EAAWtB,EAAmBrI,EAAEC,OAAOrF,QAAQ1C,SAAA,CACpFC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,mBACtBC,cAAA,UAAQyC,MAAM,eAAc1C,SAAC,0BAC7BC,cAAA,UAAQyC,MAAM,WAAU1C,SAAC,sBACzBC,cAAA,UAAQyC,MAAM,YAAW1C,SAAC,uBAC1BC,cAAA,UAAQyC,MAAM,iBAAgB1C,SAAC,qCAGnCC,cAAA,SACEyC,MAAO8L,EACP3G,SAAUC,GAAKgJ,EAAahJ,EAAEC,OAAOrF,OACrCsF,YAAY,yCACZC,UAAQ,IAEVhI,cAAA,SACEyC,MAAOkP,EACP/J,SAAUC,GAAK+J,EAAa/J,EAAEC,OAAOrF,OACrCsF,YAAY,qCACZC,UAAQ,IAEVpI,eAAA,UAAQ6C,MAAOoG,EAAWjB,SAAUC,GAAKiJ,EAAajJ,EAAEC,OAAOrF,OAAO1C,SAAA,CACpEC,cAAA,UAAQyC,MAAM,MAAK1C,SAAC,QACpBC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,UACtBC,cAAA,UAAQyC,MAAM,OAAM1C,SAAC,SACrBC,cAAA,UAAQyC,MAAM,SAAQ1C,SAAC,WACvBC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,UACtBC,cAAA,UAAQyC,MAAM,QAAO1C,SAAC,UACtBC,cAAA,UAAQyC,MAAM,UAAS1C,SAAC,eAGzB2B,GAAS1B,cAAA,KAAGH,UAAU,aAAYE,SAAE2B,IACrC1B,cAAA,UAAQH,UAAU,eAAe2H,KAAK,SAASS,SAAUjD,EAAQjF,SAC9DiF,EAAU,YAAc,+BCxKtB+N,MAxEmBA,KAChC,MACMxJ,EADcC,cACED,QAAU,IACzB8G,EAASC,GAAc3L,mBAAsC,OAC7DK,EAASC,GAAcN,oBAAS,IAChCjD,EAAOqD,GAAYJ,mBAAS,IAqBnC,OAnBAS,oBAAU,KAcJmE,GAbSxG,WACXkC,GAAW,GACXF,EAAS,IACT,IACE,MAAM7C,OX8GoBa,iBACTlC,EAAOmC,IAAG,UAAAlD,OAAiCmP,KAClD/M,KWhHS8Q,CAAmBzJ,GACtC+G,EAAWpO,EACb,CAAE,MAAOwE,GACP3B,EAASnB,EAAmB8C,EAAK,0BACnC,CAAC,QACCzB,GAAW,EACb,GAIK8M,IAEN,CAACxI,IAEAvE,EACKhF,cAAA,OAAKH,UAAU,aAAYE,SAACC,cAAA,KAAAD,SAAG,yBAGpC2B,IAAU2O,EACLrQ,cAAA,OAAKH,UAAU,aAAYE,SAACC,cAAA,KAAGH,UAAU,aAAYE,SAAE2B,GAAS,0BAIvE9B,eAAA,OAAKC,UAAU,aAAYE,SAAA,CACzBC,cAAA,OAAKH,UAAU,YAAWE,SACxBH,eAAA,MAAAG,SAAA,CAAKsQ,EAAQ5J,KAAKzC,KAAK,kBAGzBpE,eAAA,OAAKC,UAAU,cAAaE,SAAA,CAC1BC,cAAC4I,EAAW,CAACC,UAAWwH,EAAQ5J,KAAKoC,UAAW7E,KAAMqM,EAAQ5J,KAAKzC,KAAM+C,KAAM,KAC/EnH,eAAA,OAAAG,SAAA,CACEC,cAAA,KAAGH,UAAU,QAAOE,SAAEsQ,EAAQ5J,KAAKtG,WACnCH,cAAA,KAAGH,UAAU,QAAOE,SAAEsQ,EAAQ5J,KAAKuH,OAAOC,QAAQ,IAAK,aAI3DrO,eAAA,OAAKC,UAAU,eAAekJ,MAAO,CAAEkK,UAAW,IAAKlT,SAAA,CACrDC,cAAA,KAAAD,SAAIsQ,EAAQ5J,KAAKyH,KAAO,gBACxBlO,cAAA,OAAKH,UAAU,UAASE,UACpBsQ,EAAQ5J,KAAK8H,WAAa,IAAIrB,IAAIsB,GAClCxO,cAAA,QAAMH,UAAU,MAAKE,SAAiByO,GAAXA,SAKhC6B,EAAQ1F,qBACP3K,cAAA,OAAKH,UAAU,qBAAqBkJ,MAAO,CAAEkK,UAAW,IAAKlT,SAC1DsQ,EAAQrG,cAAckD,IAAIG,GACzBrN,cAAA,OAAiB0F,IAAK2H,EAAOC,IAAI,kBAAkBzN,UAAU,iBAAnDwN,MAIdrN,cAAA,KAAGH,UAAU,QAAQkJ,MAAO,CAAEkK,UAAW,IAAKlT,SAAC,iF,MC6IxCmT,MApMOA,KACpB,MAAO1M,EAAO2M,GAAiBxO,mBAAiB,IAAMyO,aAAaC,QAAQ,iBAAmB,KACvF5M,EAAM6M,GAAW3O,mBAAsB,OACvC4O,EAAaC,GAAkB7O,mBAASiH,QAAQpF,KAChDiN,EAAkBC,GAAuB/O,mBAAS,KAClDgP,EAAYC,GAAiBjP,mBAAS,GAE7CS,oBAAU,KZ8CiBoB,KAC3B5F,EAAY4F,GY9CVqN,CAAarN,GAAS,KACrB,CAACA,IAEJpB,oBAAU,KACYrC,WAElB,GADA2Q,EAAoB,KACflN,EAGH,OAFA8M,EAAQ,WACRE,GAAe,GAIjB,IACE,IAAInE,EAAuB,KAC3B,IAAK,IAAIyE,EAAU,EAAGA,EAAU,EAAGA,GAAW,EAC5C,IACEzE,QAAgBvM,IAChB,KACF,CAAE,MAAOpB,GACP,MAAMY,EAASuB,EAAkBnC,GACjC,GAAe,MAAXY,GAA6B,MAAXA,EAKpB,OAJA8Q,aAAaW,WAAW,gBACxBZ,EAAc,IACdG,EAAQ,WACRI,EAAoB,UAGhB,IAAI9Q,QAAQoR,GAAW/H,WAAW+H,EAAS,KAAOF,EAAU,IACpE,CAGF,IAAKzE,EAEH,YADAqE,EAAoB,wDAItBJ,EAAQjE,EACV,CAAC,QACCmE,GAAe,EACjB,GAGGS,IACJ,CAACzN,EAAOmN,IAEX,MAAMO,EAAgBzH,kBAAQ,IAAMb,QAAQpF,GAASC,GAAO,CAACD,EAAOC,IAC9D0N,EAAkBvI,QAAQnF,IAASA,EAAK2N,qBAExCC,EAAYC,IACZA,EACFlB,aAAamB,QAAQ,eAAgBD,GAErClB,aAAaW,WAAW,gBAE1BZ,EAAcmB,IAQVE,EAAwBC,IAC5BnB,EAAQmB,IAQV,OAAIlB,EACKvT,cAAA,OAAKH,UAAU,gBAAeE,SAAC,4BAGpC0T,GAAoBjN,EAEpBxG,cAAA,OAAKH,UAAU,gBAAeE,SAC5BH,eAAA,OAAAG,SAAA,CACEC,cAAA,KAAAD,SAAI0T,IACJzT,cAAA,UAAQH,UAAU,eAAeW,QAASA,KACxCgT,GAAe,GACfI,EAAcpI,GAAQA,EAAO,IAC7BzL,SAAC,eASTH,eAAC8U,IAAa,CAAA3U,SAAA,CACXmU,IAAkBC,GAAmBnU,cAACC,EAAM,CAACC,SA3BnCyU,KACbN,EAAS,IACTf,EAAQ,SA2BN1T,eAACgV,IAAM,CAAA7U,SAAA,CACLC,cAAC6U,IAAK,CAACC,KAAK,QAAO/U,SAChBmU,EACClU,cAAC+U,IAAQ,CAACxU,GAAI4T,EAAkB,cAAgB,cAEhDnU,cAACmE,EAAQ,CAACC,gBA3CIA,CAACkQ,EAAmBU,KAC1CX,EAASC,GACThB,EAAQ0B,QA6CJhV,cAAC6U,IAAK,CAACC,KAAK,QAAO/U,SAChBmU,EAAgBlU,cAAC+U,IAAQ,CAACxU,GAAI4T,EAAkB,cAAgB,cAAkBnU,cAACwP,EAAQ,MAG9FxP,cAAC6U,IAAK,CAACC,KAAK,cAAa/U,SACtBmU,GAAiBzN,EAChB0N,EACEnU,cAAC6S,EAAc,CAACpM,KAAMA,EAAMqM,WAAY0B,IAExCxU,cAAC+U,IAAQ,CAACxU,GAAG,cAGfP,cAAC+U,IAAQ,CAACxU,GAAG,YAIjBP,cAAC6U,IAAK,CAACC,KAAK,YAAW/U,SACpBmU,EACCC,EACEnU,cAAC+U,IAAQ,CAACxU,GAAG,gBAEbP,cAACyO,EAAY,IAGfzO,cAAC+U,IAAQ,CAACxU,GAAG,YAIjBP,cAAC6U,IAAK,CAACC,KAAK,WAAU/U,SACnBmU,EACCC,EACEnU,cAAC+U,IAAQ,CAACxU,GAAG,gBAEbP,cAAC0P,EAAW,IAGd1P,cAAC+U,IAAQ,CAACxU,GAAG,YAIjBP,cAAC6U,IAAK,CAACC,KAAK,WAAWG,OAAK,EAAAlV,SACzBmU,GAAiBzN,EAChB0N,EACEnU,cAAC+U,IAAQ,CAACxU,GAAG,gBAEbP,cAACmQ,EAAa,CAACC,cAAeoE,IAGhCxU,cAAC+U,IAAQ,CAACxU,GAAG,YAIjBP,cAAC6U,IAAK,CAACC,KAAK,mBAAkB/U,SAC3BmU,EACCC,EACEnU,cAAC+U,IAAQ,CAACxU,GAAG,gBAEbP,cAAC+S,EAAe,IAGlB/S,cAAC+U,IAAQ,CAACxU,GAAG,YAIjBP,cAAC6U,IAAK,CAACC,KAAK,qBAAoB/U,SAC7BmU,GAAiBzN,EAChB0N,EACEnU,cAAC+U,IAAQ,CAACxU,GAAG,gBAEbP,cAACsJ,EAAQ,CAACC,OAAQ9C,EAAKb,KAGzB5F,cAAC+U,IAAQ,CAACxU,GAAG,YAIjBP,cAAC6U,IAAK,CAACC,KAAK,IAAG/U,SACbC,cAAC+U,IAAQ,CAACxU,GAAI2T,EAAiBC,EAAkB,cAAgB,YAAe,mBCxM1Fe,IAASC,OACPnV,cAACoV,IAAMC,WAAU,CAAAtV,SACfC,cAACkT,EAAG,MAEN5N,SAASC,eAAe,Q","file":"static/js/main.9542f0f4.chunk.js","sourcesContent":["import React from 'react';\n\ninterface BrandLogoProps {\n  compact?: boolean;\n}\n\nconst BrandLogo: React.FC<BrandLogoProps> = ({ compact = false }) => {\n  return (\n    <div className={`brand-logo ${compact ? 'compact' : ''}`}>\n      <span className=\"brand-mark\" aria-hidden=\"true\">\n        IT\n      </span>\n      <span className=\"brand-wordmark\">Indian Tinder</span>\n    </div>\n  );\n};\n\nexport default BrandLogo;\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport BrandLogo from './BrandLogo';\n\ninterface TopNavProps {\n  onLogout: () => void;\n}\n\nconst TopNav: React.FC<TopNavProps> = ({ onLogout }) => {\n  const location = useLocation();\n\n  return (\n    <header className=\"top-nav\">\n      <div className=\"brand\">\n        <BrandLogo compact />\n      </div>\n      <nav>\n        <Link className={location.pathname === '/discover' ? 'active-link' : ''} to=\"/discover\">\n          Discover\n        </Link>\n        <Link className={location.pathname === '/matches' ? 'active-link' : ''} to=\"/matches\">\n          Matches\n        </Link>\n        <Link className={location.pathname === '/profile' ? 'active-link' : ''} to=\"/profile\">\n          Profile\n        </Link>\n      </nav>\n      <button className=\"btn btn-ghost\" onClick={onLogout}>\n        Logout\n      </button>\n    </header>\n  );\n};\n\nexport default TopNav;\n","import axios from 'axios';\nimport {\n  AuthResponse,\n  ChatMessage,\n  Gender,\n  LifestyleHabit,\n  LookingFor,\n  MatchSummary,\n  MyProfileDetails,\n  RelationshipGoal,\n  SwipeResponse,\n  TypingEvent,\n  User,\n  ViewerProfileDetails\n} from '../types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\nlet authToken = '';\n\nconst client = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000\n});\n\nclient.interceptors.request.use(config => {\n  if (authToken) {\n    config.headers = {\n      ...config.headers,\n      Authorization: `Bearer ${authToken}`\n    };\n  }\n  return config;\n});\n\nconst getErrorMessage = (error: any, fallback: string): string => {\n  const responseData = error?.response?.data;\n  const serverMessage =\n    (responseData && typeof responseData.message === 'string' && responseData.message) ||\n    (responseData && typeof responseData.error === 'string' && responseData.error) ||\n    (typeof responseData === 'string' ? responseData : '');\n  if (typeof serverMessage === 'string' && serverMessage.trim()) {\n    return serverMessage;\n  }\n\n  if (error?.message === 'Network Error') {\n    return 'Unable to reach server. Please check your connection and try again.';\n  }\n\n  if (error?.response?.status === 400) {\n    return 'Invalid input. Please check your details and try again.';\n  }\n\n  return fallback;\n};\n\nclient.interceptors.response.use(\n  response => response,\n  error => {\n    const friendly = new Error(getErrorMessage(error, 'Request failed'));\n    Object.defineProperty(friendly, 'status', {\n      value: error && error.response ? error.response.status : 0,\n      enumerable: false,\n      configurable: true\n    });\n    return Promise.reject(friendly);\n  }\n);\n\nexport const setAuthToken = (token: string): void => {\n  authToken = token;\n};\n\nexport const createEventsSource = (): EventSource => {\n  const tokenParam = encodeURIComponent(authToken);\n  return new EventSource(`${API_BASE_URL}/events?token=${tokenParam}`);\n};\n\nexport interface RegisterInput {\n  name: string;\n  email: string;\n  password: string;\n}\n\nexport interface ProfileInput {\n  name: string;\n  age: number;\n  gender: Gender;\n  bio: string;\n  location: string;\n  interests: string[];\n  avatarKey: string;\n  lookingFor: LookingFor;\n  relationshipGoal: RelationshipGoal;\n  occupation: string;\n  education: string;\n  heightCm: number;\n  drinking: LifestyleHabit;\n  smoking: LifestyleHabit;\n  religion: string;\n  languages: string[];\n  privatePhotos: string[];\n}\n\nexport const register = async (payload: RegisterInput): Promise<AuthResponse> => {\n  const response = await client.post<AuthResponse>('/auth/register', payload);\n  return response.data;\n};\n\nexport const login = async (email: string, password: string): Promise<AuthResponse> => {\n  const response = await client.post<AuthResponse>('/auth/login', { email, password });\n  return response.data;\n};\n\nexport const loginWithGoogle = async (idToken: string): Promise<AuthResponse> => {\n  const response = await client.post<AuthResponse>('/auth/google', { idToken });\n  return response.data;\n};\n\nexport const getProfile = async (): Promise<User> => {\n  const response = await client.get<User>('/users/me');\n  return response.data;\n};\n\nexport const getMyProfileDetails = async (): Promise<MyProfileDetails> => {\n  const response = await client.get<MyProfileDetails>('/users/me/details');\n  return response.data;\n};\n\nexport const getUserProfileById = async (targetUserId: string): Promise<ViewerProfileDetails> => {\n  const response = await client.get<ViewerProfileDetails>(`/users/${targetUserId}`);\n  return response.data;\n};\n\nexport const updateProfile = async (payload: ProfileInput): Promise<User> => {\n  const response = await client.put<User>('/users/me/profile', payload);\n  return response.data;\n};\n\nexport const discoverUsers = async (): Promise<User[]> => {\n  const response = await client.get<User[]>('/users/discover');\n  return response.data;\n};\n\nexport const swipeUser = async (\n  targetUserId: string,\n  action: 'like' | 'pass'\n): Promise<SwipeResponse> => {\n  const response = await client.post<SwipeResponse>('/swipes', {\n    targetUserId,\n    action\n  });\n  return response.data;\n};\n\nexport const getMatches = async (): Promise<MatchSummary[]> => {\n  const response = await client.get<MatchSummary[]>('/matches');\n  return response.data;\n};\n\nexport const grantPhotoAccess = async (matchUserId: string): Promise<{ ok: boolean }> => {\n  const response = await client.post<{ ok: boolean }>(`/matches/${matchUserId}/grant-photo-access`);\n  return response.data;\n};\n\nexport const getPrivatePhotos = async (matchUserId: string): Promise<string[]> => {\n  const response = await client.get<{ photos: string[] }>(`/matches/${matchUserId}/private-photos`);\n  return response.data.photos;\n};\n\nexport const getMessages = async (matchUserId: string): Promise<ChatMessage[]> => {\n  const response = await client.get<ChatMessage[]>('/messages', {\n    params: {\n      matchUserId\n    }\n  });\n  return response.data;\n};\n\nexport const sendMessage = async (toUserId: string, text: string): Promise<ChatMessage> => {\n  const response = await client.post<ChatMessage>('/messages', {\n    toUserId,\n    text\n  });\n  return response.data;\n};\n\nexport const sendTyping = async (toUserId: string, isTyping: boolean): Promise<{ ok: boolean }> => {\n  const response = await client.post<{ ok: boolean }>('/typing', {\n    toUserId,\n    isTyping\n  });\n  return response.data;\n};\n\nexport const parseTypingEvent = (raw: string): TypingEvent => {\n  const parsed: any = JSON.parse(raw);\n  return parsed;\n};\n\nexport const parseMessageEvent = (raw: string): ChatMessage => {\n  const parsed: any = JSON.parse(raw);\n  return parsed;\n};\n\nexport const parseMatchEvent = (raw: string): MatchSummary => {\n  const parsed: any = JSON.parse(raw);\n  return parsed;\n};\n\nexport const getApiErrorMessage = (error: any, fallback: string): string => {\n  if (error?.message && typeof error.message === 'string') {\n    return error.message;\n  }\n  return fallback;\n};\n\nexport const getApiErrorStatus = (error: any): number => {\n  return Number(error?.status || 0);\n};\n","import React, { useEffect, useState } from 'react';\nimport BrandLogo from '../components/BrandLogo';\nimport {\n  getApiErrorMessage,\n  login,\n  loginWithGoogle,\n  register,\n  RegisterInput\n} from '../services/api';\nimport { User } from '../types';\n\ninterface AuthPageProps {\n  onAuthenticated: (token: string, user: User) => void;\n}\n\nconst defaultRegisterState: RegisterInput = {\n  name: '',\n  email: '',\n  password: ''\n};\n\nconst AuthPage: React.FC<AuthPageProps> = ({ onAuthenticated }) => {\n  const getInitialMode = (): 'login' | 'register' => {\n    const params = new URLSearchParams(window.location.search);\n    return params.get('mode') === 'register' ? 'register' : 'login';\n  };\n\n  const [mode, setMode] = useState<'login' | 'register'>(getInitialMode);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const googleClientId = process.env.REACT_APP_GOOGLE_CLIENT_ID || '';\n\n  useEffect(() => {\n    setMode(getInitialMode());\n  }, []);\n\n  useEffect(() => {\n    if (!googleClientId) {\n      return;\n    }\n\n    const scriptId = 'google-identity-script';\n    if (!document.getElementById(scriptId)) {\n      const script = document.createElement('script');\n      script.src = 'https://accounts.google.com/gsi/client';\n      script.async = true;\n      script.defer = true;\n      script.id = scriptId;\n      script.onload = () => {\n        // @ts-ignore - Google Identity script injects this global\n        const googleApi = window.google;\n        if (googleApi) {\n          googleApi.accounts.id.initialize({\n            client_id: googleClientId,\n            callback: async (response: any) => {\n              try {\n                const result = await loginWithGoogle(response.credential);\n                onAuthenticated(result.token, result.user);\n              } catch (err) {\n                setError(getApiErrorMessage(err, 'Google login failed'));\n              }\n            }\n          });\n          const container = document.getElementById('google-signin-button');\n          if (container) {\n            container.innerHTML = '';\n            googleApi.accounts.id.renderButton(container, {\n              theme: 'outline',\n              size: 'large',\n              shape: 'pill',\n              text: 'continue_with'\n            });\n          }\n        }\n      };\n      document.body.appendChild(script);\n    }\n  }, [googleClientId, onAuthenticated]);\n\n  const submitLogin = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const result = await login(email, password);\n      onAuthenticated(result.token, result.user);\n    } catch (err) {\n      setError(getApiErrorMessage(err, 'Login failed'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const submitRegister = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n\n    const payload: RegisterInput = {\n      ...defaultRegisterState,\n      name,\n      email,\n      password\n    };\n\n    try {\n      const result = await register(payload);\n      onAuthenticated(result.token, result.user);\n    } catch (err) {\n      setError(getApiErrorMessage(err, 'Registration failed'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (event: React.FormEvent): Promise<void> => {\n    event.preventDefault();\n    if (mode === 'login') {\n      await submitLogin();\n      return;\n    }\n    await submitRegister();\n  };\n\n  return (\n    <main className=\"auth-layout\">\n      <section className=\"auth-shell\">\n        <aside className=\"auth-side\">\n          <BrandLogo />\n          <h2>Secure dating built on trust, not pressure</h2>\n          <p>\n            Start with private profiles, match with people who share your intent, and choose when to unlock photos.\n          </p>\n          <ul className=\"auth-benefits\">\n            <li>Google and email sign-in</li>\n            <li>Intent and compatibility-first profile flow</li>\n            <li>Photo access only by explicit consent</li>\n          </ul>\n        </aside>\n\n        <div className=\"auth-panel\">\n          <h1>{mode === 'login' ? 'Welcome Back' : 'Create Your Account'}</h1>\n          <p>Use Gmail/Google or email login. Private photos unlock only with consent after meaningful chat.</p>\n          <div className=\"auth-toggle\">\n            <button\n              className={`btn ${mode === 'login' ? 'btn-like' : 'btn-ghost'}`}\n              type=\"button\"\n              onClick={() => setMode('login')}\n            >\n              Login\n            </button>\n            <button\n              className={`btn ${mode === 'register' ? 'btn-like' : 'btn-ghost'}`}\n              type=\"button\"\n              onClick={() => setMode('register')}\n            >\n              Register\n            </button>\n          </div>\n\n          <form className=\"auth-form\" onSubmit={handleSubmit}>\n            {mode === 'register' && (\n              <input\n                value={name}\n                onChange={e => setName(e.target.value)}\n                type=\"text\"\n                placeholder=\"Full name\"\n                required\n              />\n            )}\n\n            <input\n              value={email}\n              onChange={e => setEmail(e.target.value)}\n              type=\"email\"\n              placeholder=\"Email\"\n              required\n            />\n            <input\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n              type=\"password\"\n              placeholder=\"Password\"\n              required\n            />\n\n            {error && <p className=\"error-text\">{error}</p>}\n\n            <button className=\"btn btn-like\" type=\"submit\" disabled={loading}>\n              {loading ? 'Please wait...' : mode === 'login' ? 'Login' : 'Create Account'}\n            </button>\n          </form>\n\n          {googleClientId ? (\n            <div className=\"google-wrap\">\n              <p className=\"muted\">or continue with Google</p>\n              <div id=\"google-signin-button\" />\n            </div>\n          ) : null}\n        </div>\n      </section>\n    </main>\n  );\n};\n\nexport default AuthPage;\n","import React from 'react';\n\ninterface AvatarBadgeProps {\n  avatarKey: string;\n  name: string;\n  size?: number;\n}\n\nconst AVATAR_MAP: Record<string, { emoji: string; bg: string }> = {\n  fox: { emoji: 'ü¶ä', bg: '#fee2e2' },\n  lotus: { emoji: 'ü™∑', bg: '#fce7f3' },\n  lion: { emoji: 'ü¶Å', bg: '#fde68a' },\n  falcon: { emoji: 'ü¶Ö', bg: '#dbeafe' },\n  panda: { emoji: 'üêº', bg: '#e5e7eb' },\n  tiger: { emoji: 'üêØ', bg: '#ffedd5' },\n  peacock: { emoji: 'ü¶ö', bg: '#dcfce7' }\n};\n\nconst AvatarBadge: React.FC<AvatarBadgeProps> = ({ avatarKey, name, size = 56 }) => {\n  const config = AVATAR_MAP[avatarKey] || AVATAR_MAP.fox;\n\n  return (\n    <div\n      className=\"avatar-badge\"\n      title={`${name}'s avatar`}\n      style={{ width: size, height: size, background: config.bg }}\n    >\n      <span style={{ fontSize: Math.floor(size * 0.45) }}>{config.emoji}</span>\n    </div>\n  );\n};\n\nexport default AvatarBadge;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport AvatarBadge from '../components/AvatarBadge';\nimport {\n  createEventsSource,\n  getMatches,\n  getMessages,\n  getPrivatePhotos,\n  grantPhotoAccess,\n  parseMatchEvent,\n  parseMessageEvent,\n  parseTypingEvent,\n  sendMessage,\n  sendTyping\n} from '../services/api';\nimport { ChatMessage, MatchSummary } from '../types';\n\ninterface ChatPageProps {\n  userId: string;\n}\n\nconst ChatPage: React.FC<ChatPageProps> = ({ userId }) => {\n  const params: any = useParams();\n  const matchUserId = params.matchUserId || '';\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [targetMatch, setTargetMatch] = useState<MatchSummary | null>(null);\n  const [draft, setDraft] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [privatePhotos, setPrivatePhotos] = useState<string[]>([]);\n  const [photoError, setPhotoError] = useState('');\n\n  const loadChat = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const [allMatches, chatMessages] = await Promise.all([getMatches(), getMessages(matchUserId)]);\n      const matchedUser = allMatches.find(match => match.user.id === matchUserId) || null;\n      if (!matchedUser) {\n        setError('Match not found.');\n      }\n      setTargetMatch(matchedUser);\n      setMessages(chatMessages);\n\n      if (matchedUser?.canViewPrivatePhotos) {\n        try {\n          const photos = await getPrivatePhotos(matchUserId);\n          setPrivatePhotos(photos);\n          setPhotoError('');\n        } catch (err) {\n          setPhotoError(err instanceof Error ? err.message : 'Could not load private photos');\n        }\n      } else {\n        setPrivatePhotos([]);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Unable to load chat');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadChat();\n  }, [matchUserId]);\n\n  useEffect(() => {\n    const source = createEventsSource();\n\n    source.addEventListener('message', (event: MessageEvent) => {\n      const message = parseMessageEvent(event.data);\n      const belongsToThread =\n        (message.fromUserId === userId && message.toUserId === matchUserId) ||\n        (message.fromUserId === matchUserId && message.toUserId === userId);\n\n      if (belongsToThread) {\n        setMessages(prev => {\n          if (prev.some(existing => existing.id === message.id)) {\n            return prev;\n          }\n          return [...prev, message];\n        });\n      }\n    });\n\n    source.addEventListener('typing', (event: MessageEvent) => {\n      const typing = parseTypingEvent(event.data);\n      if (typing.fromUserId === matchUserId) {\n        setIsTyping(Boolean(typing.isTyping));\n      }\n    });\n\n    source.addEventListener('match', (event: MessageEvent) => {\n      const match = parseMatchEvent(event.data);\n      if (match?.user?.id === matchUserId) {\n        setTargetMatch(match);\n      }\n    });\n\n    source.onerror = () => {\n      source.close();\n    };\n\n    return () => {\n      source.close();\n    };\n  }, [matchUserId, userId]);\n\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      void sendTyping(matchUserId, draft.trim().length > 0);\n    }, 250);\n\n    return () => clearTimeout(timeoutId);\n  }, [draft, matchUserId]);\n\n  const send = async (): Promise<void> => {\n    if (!draft.trim()) {\n      return;\n    }\n\n    try {\n      await sendMessage(matchUserId, draft);\n      setDraft('');\n      void sendTyping(matchUserId, false);\n      void loadChat();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to send message');\n    }\n  };\n\n  const grantAccess = async (): Promise<void> => {\n    try {\n      await grantPhotoAccess(matchUserId);\n      await loadChat();\n    } catch (err) {\n      setPhotoError(err instanceof Error ? err.message : 'Unable to grant photo access');\n    }\n  };\n\n  const sortedMessages = useMemo(\n    () => [...messages].sort((a, b) => a.createdAt.localeCompare(b.createdAt)),\n    [messages]\n  );\n\n  return (\n    <div className=\"page-shell chat-shell\">\n      <div className=\"page-head\">\n        <h1>{targetMatch ? `Chat with ${targetMatch.user.name}` : 'Chat'}</h1>\n        <div className=\"match-actions\">\n          <Link className=\"btn btn-ghost\" to={`/profile/${matchUserId}`}>\n            View Profile\n          </Link>\n          <Link className=\"btn btn-ghost\" to=\"/matches\">\n            Back\n          </Link>\n        </div>\n      </div>\n\n      {targetMatch && (\n        <div className=\"trust-panel\">\n          <AvatarBadge avatarKey={targetMatch.user.avatarKey} name={targetMatch.user.name} size={64} />\n          <div>\n            <p className=\"muted\">Trust progress: {targetMatch.messageCount}/8 messages</p>\n            {!targetMatch.canViewPrivatePhotos && (\n              <p className=\"muted\">Private photos unlock only after enough chat and explicit permission.</p>\n            )}\n            {targetMatch.isEligibleToGrantPhotoAccess && !targetMatch.hasGrantedPhotoAccess && (\n              <button className=\"btn btn-ghost\" onClick={() => void grantAccess()}>\n                Grant Your Photo Access\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n\n      <div className=\"chat-expiry-notice\">\n        Chats auto-delete after 24 hours to protect your privacy.\n      </div>\n\n      {loading && <p>Loading conversation...</p>}\n      {error && <p className=\"error-text\">{error}</p>}\n\n      <div className=\"chat-thread\">\n        {sortedMessages.map(message => (\n          <div\n            key={message.id}\n            className={`message-bubble ${message.fromUserId === userId ? 'mine' : 'theirs'}`}\n          >\n            <p>{message.text}</p>\n            <span>{new Date(message.createdAt).toLocaleTimeString()}</span>\n          </div>\n        ))}\n      </div>\n\n      {isTyping && <p className=\"typing-indicator\">{targetMatch?.user.name || 'They'} is typing...</p>}\n\n      {targetMatch?.canViewPrivatePhotos && (\n        <div className=\"private-photo-grid\">\n          {privatePhotos.map(photo => (\n            <img key={photo} src={photo} alt=\"Private profile\" className=\"private-photo\" />\n          ))}\n        </div>\n      )}\n      {photoError && <p className=\"error-text\">{photoError}</p>}\n\n      <div className=\"chat-input-row\">\n        <input\n          value={draft}\n          onChange={event => setDraft(event.target.value)}\n          placeholder=\"Write your message...\"\n          onKeyDown={event => {\n            if (event.key === 'Enter') {\n              void send();\n            }\n          }}\n        />\n        <button className=\"btn btn-like\" onClick={() => void send()}>\n          Send\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatPage;\n","import React from 'react';\nimport { MatchSummary } from '../types';\nimport AvatarBadge from './AvatarBadge';\n\ninterface MatchModalProps {\n  match: MatchSummary;\n  onClose: () => void;\n}\n\nconst MatchModal: React.FC<MatchModalProps> = ({ match, onClose }) => {\n  return (\n    <div className=\"overlay\" role=\"dialog\" aria-modal=\"true\">\n      <div className=\"modal\">\n        <h2>It&apos;s a Match</h2>\n        <AvatarBadge avatarKey={match.user.avatarKey} name={match.user.name} size={120} />\n        <p>\n          You and <strong>{match.user.name}</strong> liked each other.\n        </p>\n        <p className=\"muted\">Keep chatting to build trust and unlock private photos with consent.</p>\n        <button className=\"btn btn-like\" onClick={onClose}>\n          Continue\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default MatchModal;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { User } from '../types';\nimport AvatarBadge from './AvatarBadge';\n\ninterface SwipeCardProps {\n  user: User;\n  onLike: () => void;\n  onPass: () => void;\n}\n\nconst SwipeCard: React.FC<SwipeCardProps> = ({ user, onLike, onPass }) => {\n  return (\n    <article className=\"profile-card\">\n      <div className=\"avatar-panel\">\n        <AvatarBadge avatarKey={user.avatarKey} name={user.name} size={160} />\n        <p className=\"muted\">Private photos stay hidden until both trust each other.</p>\n      </div>\n      <div className=\"profile-body\">\n        <h2>\n          {user.name}, {user.age}\n        </h2>\n        <p className=\"profile-location\">\n          {user.location} ¬∑ {user.gender.replace('_', ' ')}\n        </p>\n        <p>{user.bio || 'No bio yet.'}</p>\n        <p className=\"muted\">\n          {user.occupation} ¬∑ {user.education}\n        </p>\n        <p className=\"muted\">\n          Looking for {user.lookingFor.replace('_', ' ')} ¬∑ Goal: {user.relationshipGoal.replace('_', ' ')}\n        </p>\n        <div className=\"tag-row\">\n          {user.interests.map(interest => (\n            <span className=\"tag\" key={interest}>\n              {interest}\n            </span>\n          ))}\n        </div>\n        <Link className=\"btn btn-ghost\" to={`/profile/${user.id}`}>\n          View Profile\n        </Link>\n        <div className=\"action-row\">\n          <button className=\"btn btn-pass\" onClick={onPass}>\n            Pass\n          </button>\n          <button className=\"btn btn-like\" onClick={onLike}>\n            Like\n          </button>\n        </div>\n      </div>\n    </article>\n  );\n};\n\nexport default SwipeCard;\n","import React, { useEffect, useState } from 'react';\nimport MatchModal from '../components/MatchModal';\nimport SwipeCard from '../components/SwipeCard';\nimport { discoverUsers, swipeUser } from '../services/api';\nimport { MatchSummary, User } from '../types';\n\nconst DiscoverPage: React.FC = () => {\n  const [profiles, setProfiles] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [match, setMatch] = useState<MatchSummary | null>(null);\n\n  const loadProfiles = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const users = await discoverUsers();\n      setProfiles(users);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load profiles');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadProfiles();\n  }, []);\n\n  const handleSwipe = async (targetUserId: string, action: 'like' | 'pass'): Promise<void> => {\n    try {\n      const result = await swipeUser(targetUserId, action);\n      setProfiles(prev => prev.filter(profile => profile.id !== targetUserId));\n      if (result.matched && result.match) {\n        setMatch(result.match);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Swipe failed');\n    }\n  };\n\n  const topProfile = profiles[0];\n\n  return (\n    <div className=\"page-shell\">\n      <h1>Discover</h1>\n      {loading && <p>Loading profiles...</p>}\n      {error && <p className=\"error-text\">{error}</p>}\n\n      {!loading && !topProfile && <p>No new profiles right now. Check back soon.</p>}\n\n      {topProfile && (\n        <SwipeCard\n          user={topProfile}\n          onPass={() => handleSwipe(topProfile.id, 'pass')}\n          onLike={() => handleSwipe(topProfile.id, 'like')}\n        />\n      )}\n\n      {match && <MatchModal match={match} onClose={() => setMatch(null)} />}\n    </div>\n  );\n};\n\nexport default DiscoverPage;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport BrandLogo from '../components/BrandLogo';\n\nconst HomePage: React.FC = () => {\n  const heroVisualStyle = {\n    backgroundImage:\n      \"linear-gradient(190deg, rgba(9, 14, 22, 0.12), rgba(9, 14, 22, 0.28)), url('/landing-couple.png')\"\n  };\n\n  return (\n    <main className=\"landing-page\">\n      <header className=\"landing-header\">\n        <div className=\"landing-brand\">\n          <BrandLogo />\n        </div>\n        <nav className=\"landing-actions\">\n          <Link className=\"btn btn-ghost\" to=\"/auth?mode=login\">\n            Login\n          </Link>\n          <Link className=\"btn btn-like\" to=\"/auth?mode=register\">\n            Sign Up\n          </Link>\n        </nav>\n      </header>\n\n      <section className=\"landing-hero\">\n        <div className=\"landing-copy\">\n          <p className=\"landing-kicker\">Date Blind, Build trust and become friends.</p>\n          <h1>Date Blind, Build trust and become friends.</h1>\n          <p>\n            Match through personality-first profiles and avatars. Unlock photos only after both people connect,\n            chat, and consent.\n          </p>\n          <div className=\"landing-cta-row\">\n            <Link className=\"btn btn-like\" to=\"/auth?mode=register\">\n              Start Dating\n            </Link>\n            <Link className=\"btn btn-ghost\" to=\"/auth?mode=login\">\n              I Have an Account\n            </Link>\n          </div>\n          <div className=\"landing-stats\">\n            <div className=\"stat-card\">\n              <h3>Consent-first</h3>\n              <p>Private images remain locked until both users grant access.</p>\n            </div>\n            <div className=\"stat-card\">\n              <h3>Avatar-led Discovery</h3>\n              <p>Match through values and vibe before appearance.</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"landing-visual\" style={heroVisualStyle} role=\"img\" aria-label=\"Blind date visual\" />\n      </section>\n\n      <section className=\"feature-grid\">\n        <article className=\"feature-card\">\n          <h3>Intent-led Profiles</h3>\n          <p>\n            Set your relationship goals, preferences, lifestyle, and key details so every connection starts with\n            clarity.\n          </p>\n        </article>\n        <article className=\"feature-card\">\n          <h3>Smart Match Journey</h3>\n          <p>\n            Discover profiles, match instantly on mutual likes, and move into focused one-to-one conversation.\n          </p>\n        </article>\n        <article className=\"feature-card\">\n          <h3>Trust Unlock Layer</h3>\n          <p>\n            Photos are shared only after meaningful conversation and explicit permission from the profile owner.\n          </p>\n        </article>\n      </section>\n    </main>\n  );\n};\n\nexport default HomePage;\n","import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport AvatarBadge from '../components/AvatarBadge';\nimport { getMatches } from '../services/api';\nimport { MatchSummary } from '../types';\n\nconst MatchesPage: React.FC = () => {\n  const [matches, setMatches] = useState<MatchSummary[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  const loadMatches = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const data = await getMatches();\n      setMatches(data);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load matches');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadMatches();\n  }, []);\n\n  return (\n    <div className=\"page-shell\">\n      <div className=\"page-head\">\n        <h1>Connections</h1>\n        <button className=\"btn btn-ghost\" onClick={() => void loadMatches()}>\n          Refresh\n        </button>\n      </div>\n\n      {loading && <p>Loading your connections...</p>}\n      {error && <p className=\"error-text\">{error}</p>}\n\n      {!loading && matches.length === 0 && <p>You have no matches yet. Start swiping.</p>}\n\n      <div className=\"match-list\">\n        {matches.map(match => (\n          <div className=\"match-item\" key={match.matchId}>\n            <AvatarBadge avatarKey={match.user.avatarKey} name={match.user.name} size={56} />\n            <div>\n              <h3>{match.user.name}</h3>\n              <p>{match.lastMessage?.text || 'You are now connected. Say hi.'}</p>\n              <small className=\"muted\">Messages: {match.messageCount}</small>\n              <div className=\"match-actions\">\n                <Link className=\"btn btn-ghost\" to={`/profile/${match.user.id}`}>\n                  View Profile\n                </Link>\n                <Link className=\"btn btn-like\" to={`/chat/${match.user.id}`}>\n                  Open Chat\n                </Link>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default MatchesPage;\n","import React, { useEffect, useState } from 'react';\nimport AvatarBadge from '../components/AvatarBadge';\nimport { getApiErrorMessage, getMyProfileDetails, updateProfile } from '../services/api';\nimport { Gender, LifestyleHabit, LookingFor, MyProfileDetails, RelationshipGoal, User } from '../types';\n\ninterface MyProfilePageProps {\n  onUserUpdated: (user: User) => void;\n}\n\nconst normalizeGender = (value: string): Gender => {\n  switch (value) {\n    case 'man':\n      return 'man';\n    case 'woman':\n      return 'woman';\n    case 'non_binary':\n      return 'non_binary';\n    case 'other':\n      return 'other';\n    default:\n      return 'prefer_not_say';\n  }\n};\n\nconst normalizeLookingFor = (value: string): LookingFor => {\n  switch (value) {\n    case 'man':\n    case 'woman':\n    case 'non_binary':\n    case 'everyone':\n      return value;\n    default:\n      return 'prefer_not_say';\n  }\n};\n\nconst normalizeRelationshipGoal = (value: string): RelationshipGoal => {\n  switch (value) {\n    case 'short_term':\n    case 'marriage':\n    case 'friendship':\n      return value;\n    default:\n      return 'long_term';\n  }\n};\n\nconst normalizeLifestyle = (value: string): LifestyleHabit => {\n  switch (value) {\n    case 'never':\n    case 'occasionally':\n    case 'socially':\n    case 'regularly':\n      return value;\n    default:\n      return 'prefer_not_say';\n  }\n};\n\nconst MyProfilePage: React.FC<MyProfilePageProps> = ({ onUserUpdated }) => {\n  const [details, setDetails] = useState<MyProfileDetails | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState('');\n\n  const [name, setName] = useState('');\n  const [age, setAge] = useState(21);\n  const [gender, setGender] = useState('prefer_not_say');\n  const [bio, setBio] = useState('');\n  const [location, setLocation] = useState('');\n  const [interests, setInterests] = useState('');\n  const [avatarKey, setAvatarKey] = useState('fox');\n  const [lookingFor, setLookingFor] = useState<LookingFor>('prefer_not_say');\n  const [relationshipGoal, setRelationshipGoal] = useState<RelationshipGoal>('long_term');\n  const [occupation, setOccupation] = useState('');\n  const [education, setEducation] = useState('');\n  const [heightCm, setHeightCm] = useState(170);\n  const [drinking, setDrinking] = useState<LifestyleHabit>('prefer_not_say');\n  const [smoking, setSmoking] = useState<LifestyleHabit>('prefer_not_say');\n  const [religion, setReligion] = useState('');\n  const [languages, setLanguages] = useState('');\n  const [privatePhotosRaw, setPrivatePhotosRaw] = useState('');\n\n  const load = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await getMyProfileDetails();\n      setDetails(response);\n      setName(response.user.name || '');\n      setAge(response.user.age || 21);\n      setGender(response.user.gender || 'prefer_not_say');\n      setBio(response.user.bio || '');\n      setLocation(response.user.location || '');\n      setInterests((response.user.interests || []).join(', '));\n      setAvatarKey(response.user.avatarKey || 'fox');\n      setLookingFor(response.user.lookingFor || 'prefer_not_say');\n      setRelationshipGoal(response.user.relationshipGoal || 'long_term');\n      setOccupation(response.user.occupation || '');\n      setEducation(response.user.education || '');\n      setHeightCm(response.user.heightCm || 170);\n      setDrinking(response.user.drinking || 'prefer_not_say');\n      setSmoking(response.user.smoking || 'prefer_not_say');\n      setReligion(response.user.religion || '');\n      setLanguages((response.user.languages || []).join(', '));\n      setPrivatePhotosRaw((response.privatePhotos || []).join('\\n'));\n    } catch (err) {\n      setError(getApiErrorMessage(err, 'Could not load profile'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void load();\n  }, []);\n\n  const save = async (event: React.FormEvent): Promise<void> => {\n    event.preventDefault();\n    setSaving(true);\n    setError('');\n    try {\n      const interestList = interests\n        .split(',')\n        .map(item => item.trim())\n        .filter(Boolean);\n      const languageList = languages\n        .split(',')\n        .map(item => item.trim())\n        .filter(Boolean);\n\n      const updated = await updateProfile({\n        name,\n        age,\n        gender: normalizeGender(gender),\n        bio,\n        location,\n        interests: interestList,\n        avatarKey,\n        lookingFor,\n        relationshipGoal,\n        occupation,\n        education,\n        heightCm,\n        drinking,\n        smoking,\n        religion,\n        languages: languageList,\n        privatePhotos: privatePhotosRaw\n          .split('\\n')\n          .map(item => item.trim())\n          .filter(Boolean)\n      });\n      onUserUpdated(updated);\n      window.location.assign('/discover');\n    } catch (err) {\n      setError(getApiErrorMessage(err, 'Could not save profile'));\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return <div className=\"page-shell\"><p>Loading your profile...</p></div>;\n  }\n\n  return (\n    <div className=\"page-shell\">\n      <div className=\"page-head\">\n        <h1>My Profile</h1>\n      </div>\n      {details && (\n        <div className=\"trust-panel\">\n          <AvatarBadge avatarKey={avatarKey} name={name} size={72} />\n          <div>\n            <p className=\"muted\">{details.email}</p>\n            <p className=\"muted\">Edit your details and private photos anytime.</p>\n          </div>\n        </div>\n      )}\n\n      <form className=\"auth-form\" onSubmit={save}>\n        <input value={name} onChange={e => setName(e.target.value)} placeholder=\"Name\" required />\n        <div className=\"grid-two\">\n          <input type=\"number\" min={18} max={80} value={age} onChange={e => setAge(Number(e.target.value))} required />\n          <select value={gender} onChange={e => setGender(e.target.value)}>\n            <option value=\"man\">Man</option>\n            <option value=\"woman\">Woman</option>\n            <option value=\"non_binary\">Non-binary</option>\n            <option value=\"other\">Other</option>\n            <option value=\"prefer_not_say\">Prefer not to say</option>\n          </select>\n        </div>\n        <input value={location} onChange={e => setLocation(e.target.value)} placeholder=\"Location\" required />\n        <textarea value={bio} onChange={e => setBio(e.target.value)} rows={3} placeholder=\"Bio\" required />\n        <div className=\"grid-two\">\n          <select value={lookingFor} onChange={e => setLookingFor(normalizeLookingFor(e.target.value))}>\n            <option value=\"man\">Looking for Men</option>\n            <option value=\"woman\">Looking for Women</option>\n            <option value=\"non_binary\">Looking for Non-binary</option>\n            <option value=\"everyone\">Looking for Everyone</option>\n            <option value=\"prefer_not_say\">Prefer not to say</option>\n          </select>\n          <select\n            value={relationshipGoal}\n            onChange={e => setRelationshipGoal(normalizeRelationshipGoal(e.target.value))}\n          >\n            <option value=\"long_term\">Long-term relationship</option>\n            <option value=\"short_term\">Short-term dating</option>\n            <option value=\"marriage\">Marriage</option>\n            <option value=\"friendship\">Friendship first</option>\n          </select>\n        </div>\n        <div className=\"grid-two\">\n          <input value={occupation} onChange={e => setOccupation(e.target.value)} placeholder=\"Occupation\" required />\n          <input value={education} onChange={e => setEducation(e.target.value)} placeholder=\"Education\" required />\n        </div>\n        <div className=\"grid-two\">\n          <input\n            type=\"number\"\n            min={120}\n            max={230}\n            value={heightCm}\n            onChange={e => setHeightCm(Number(e.target.value))}\n            placeholder=\"Height (cm)\"\n            required\n          />\n          <input value={religion} onChange={e => setReligion(e.target.value)} placeholder=\"Religion\" required />\n        </div>\n        <div className=\"grid-two\">\n          <select value={drinking} onChange={e => setDrinking(normalizeLifestyle(e.target.value))}>\n            <option value=\"never\">Drinking: Never</option>\n            <option value=\"occasionally\">Drinking: Occasionally</option>\n            <option value=\"socially\">Drinking: Socially</option>\n            <option value=\"regularly\">Drinking: Regularly</option>\n            <option value=\"prefer_not_say\">Drinking: Prefer not to say</option>\n          </select>\n          <select value={smoking} onChange={e => setSmoking(normalizeLifestyle(e.target.value))}>\n            <option value=\"never\">Smoking: Never</option>\n            <option value=\"occasionally\">Smoking: Occasionally</option>\n            <option value=\"socially\">Smoking: Socially</option>\n            <option value=\"regularly\">Smoking: Regularly</option>\n            <option value=\"prefer_not_say\">Smoking: Prefer not to say</option>\n          </select>\n        </div>\n        <input value={interests} onChange={e => setInterests(e.target.value)} placeholder=\"Interests (comma separated)\" required />\n        <input\n          value={languages}\n          onChange={e => setLanguages(e.target.value)}\n          placeholder=\"Languages spoken (comma separated)\"\n          required\n        />\n        <select value={avatarKey} onChange={e => setAvatarKey(e.target.value)}>\n          <option value=\"fox\">Fox</option>\n          <option value=\"lotus\">Lotus</option>\n          <option value=\"lion\">Lion</option>\n          <option value=\"falcon\">Falcon</option>\n          <option value=\"panda\">Panda</option>\n          <option value=\"tiger\">Tiger</option>\n          <option value=\"peacock\">Peacock</option>\n        </select>\n        <textarea\n          value={privatePhotosRaw}\n          onChange={e => setPrivatePhotosRaw(e.target.value)}\n          rows={5}\n          placeholder=\"Private photo URLs (one per line)\"\n        />\n        {error && <p className=\"error-text\">{error}</p>}\n        <button className=\"btn btn-like\" type=\"submit\" disabled={saving}>\n          {saving ? 'Saving...' : 'Save Profile'}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default MyProfilePage;\n","import React, { useState } from 'react';\nimport { updateProfile } from '../services/api';\nimport { Gender, LifestyleHabit, LookingFor, RelationshipGoal, User } from '../types';\n\ninterface OnboardingPageProps {\n  user: User;\n  onComplete: (user: User) => void;\n}\n\nconst normalizeGender = (value: string): Gender => {\n  switch (value) {\n    case 'man':\n      return 'man';\n    case 'woman':\n      return 'woman';\n    case 'non_binary':\n      return 'non_binary';\n    case 'other':\n      return 'other';\n    default:\n      return 'prefer_not_say';\n  }\n};\n\nconst normalizeLookingFor = (value: string): LookingFor => {\n  switch (value) {\n    case 'man':\n    case 'woman':\n    case 'non_binary':\n    case 'everyone':\n      return value;\n    default:\n      return 'prefer_not_say';\n  }\n};\n\nconst normalizeRelationshipGoal = (value: string): RelationshipGoal => {\n  switch (value) {\n    case 'short_term':\n    case 'marriage':\n    case 'friendship':\n      return value;\n    default:\n      return 'long_term';\n  }\n};\n\nconst normalizeLifestyle = (value: string): LifestyleHabit => {\n  switch (value) {\n    case 'never':\n    case 'occasionally':\n    case 'socially':\n    case 'regularly':\n      return value;\n    default:\n      return 'prefer_not_say';\n  }\n};\n\nconst OnboardingPage: React.FC<OnboardingPageProps> = ({ user, onComplete }) => {\n  const [name, setName] = useState(user.name || '');\n  const [age, setAge] = useState(user.age || 21);\n  const [gender, setGender] = useState<string>(user.gender || 'prefer_not_say');\n  const [bio, setBio] = useState(user.bio || '');\n  const [location, setLocation] = useState(user.location || '');\n  const [interests, setInterests] = useState((user.interests || []).join(', '));\n  const [lookingFor, setLookingFor] = useState<LookingFor>(user.lookingFor || 'prefer_not_say');\n  const [relationshipGoal, setRelationshipGoal] = useState<RelationshipGoal>(\n    user.relationshipGoal || 'long_term'\n  );\n  const [occupation, setOccupation] = useState(user.occupation || '');\n  const [education, setEducation] = useState(user.education || '');\n  const [heightCm, setHeightCm] = useState(user.heightCm || 170);\n  const [drinking, setDrinking] = useState<LifestyleHabit>(user.drinking || 'prefer_not_say');\n  const [smoking, setSmoking] = useState<LifestyleHabit>(user.smoking || 'prefer_not_say');\n  const [religion, setReligion] = useState(user.religion || '');\n  const [languages, setLanguages] = useState((user.languages || []).join(', '));\n  const [avatarKey, setAvatarKey] = useState(user.avatarKey || 'fox');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const submit = async (event: React.FormEvent): Promise<void> => {\n    event.preventDefault();\n    setError('');\n    setLoading(true);\n\n    const interestList = interests\n      .split(',')\n      .map(item => item.trim())\n      .filter(Boolean);\n    const languageList = languages\n      .split(',')\n      .map(item => item.trim())\n      .filter(Boolean);\n\n    if (interestList.length < 3) {\n      setError('Please add at least 3 interests.');\n      setLoading(false);\n      return;\n    }\n    if (languageList.length < 1) {\n      setError('Please add at least 1 language.');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const updated = await updateProfile({\n        name,\n        age,\n        gender: normalizeGender(gender),\n        bio,\n        location,\n        interests: interestList,\n        avatarKey,\n        lookingFor,\n        relationshipGoal,\n        occupation,\n        education,\n        heightCm,\n        drinking,\n        smoking,\n        religion,\n        languages: languageList,\n        privatePhotos: []\n      });\n      onComplete(updated);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <main className=\"auth-layout\">\n      <section className=\"auth-panel\">\n        <h1>Complete Your Profile</h1>\n        <p>Fill all details to get better matches. Only your avatar is public until photo access is granted.</p>\n\n        <form className=\"auth-form\" onSubmit={submit}>\n          <input value={name} onChange={e => setName(e.target.value)} placeholder=\"Name\" required />\n          <div className=\"grid-two\">\n            <input\n              type=\"number\"\n              min={18}\n              max={80}\n              value={age}\n              onChange={e => setAge(Number(e.target.value))}\n              placeholder=\"Age\"\n              required\n            />\n            <select value={gender} onChange={e => setGender(e.target.value)}>\n              <option value=\"man\">Man</option>\n              <option value=\"woman\">Woman</option>\n              <option value=\"non_binary\">Non-binary</option>\n              <option value=\"other\">Other</option>\n              <option value=\"prefer_not_say\">Prefer not to say</option>\n            </select>\n          </div>\n          <div className=\"grid-two\">\n            <select value={lookingFor} onChange={e => setLookingFor(normalizeLookingFor(e.target.value))}>\n              <option value=\"man\">Looking for Men</option>\n              <option value=\"woman\">Looking for Women</option>\n              <option value=\"non_binary\">Looking for Non-binary</option>\n              <option value=\"everyone\">Looking for Everyone</option>\n              <option value=\"prefer_not_say\">Prefer not to say</option>\n            </select>\n            <select\n              value={relationshipGoal}\n              onChange={e => setRelationshipGoal(normalizeRelationshipGoal(e.target.value))}\n            >\n              <option value=\"long_term\">Long-term relationship</option>\n              <option value=\"short_term\">Short-term dating</option>\n              <option value=\"marriage\">Marriage</option>\n              <option value=\"friendship\">Friendship first</option>\n            </select>\n          </div>\n          <input value={location} onChange={e => setLocation(e.target.value)} placeholder=\"Location\" required />\n          <textarea value={bio} onChange={e => setBio(e.target.value)} placeholder=\"Bio\" rows={3} required />\n          <div className=\"grid-two\">\n            <input\n              value={occupation}\n              onChange={e => setOccupation(e.target.value)}\n              placeholder=\"Occupation\"\n              required\n            />\n            <input\n              value={education}\n              onChange={e => setEducation(e.target.value)}\n              placeholder=\"Education\"\n              required\n            />\n          </div>\n          <div className=\"grid-two\">\n            <input\n              type=\"number\"\n              min={120}\n              max={230}\n              value={heightCm}\n              onChange={e => setHeightCm(Number(e.target.value))}\n              placeholder=\"Height (cm)\"\n              required\n            />\n            <input value={religion} onChange={e => setReligion(e.target.value)} placeholder=\"Religion\" required />\n          </div>\n          <div className=\"grid-two\">\n            <select value={drinking} onChange={e => setDrinking(normalizeLifestyle(e.target.value))}>\n              <option value=\"never\">Drinking: Never</option>\n              <option value=\"occasionally\">Drinking: Occasionally</option>\n              <option value=\"socially\">Drinking: Socially</option>\n              <option value=\"regularly\">Drinking: Regularly</option>\n              <option value=\"prefer_not_say\">Drinking: Prefer not to say</option>\n            </select>\n            <select value={smoking} onChange={e => setSmoking(normalizeLifestyle(e.target.value))}>\n              <option value=\"never\">Smoking: Never</option>\n              <option value=\"occasionally\">Smoking: Occasionally</option>\n              <option value=\"socially\">Smoking: Socially</option>\n              <option value=\"regularly\">Smoking: Regularly</option>\n              <option value=\"prefer_not_say\">Smoking: Prefer not to say</option>\n            </select>\n          </div>\n          <input\n            value={interests}\n            onChange={e => setInterests(e.target.value)}\n            placeholder=\"Interests (comma separated, minimum 3)\"\n            required\n          />\n          <input\n            value={languages}\n            onChange={e => setLanguages(e.target.value)}\n            placeholder=\"Languages spoken (comma separated)\"\n            required\n          />\n          <select value={avatarKey} onChange={e => setAvatarKey(e.target.value)}>\n            <option value=\"fox\">Fox</option>\n            <option value=\"lotus\">Lotus</option>\n            <option value=\"lion\">Lion</option>\n            <option value=\"falcon\">Falcon</option>\n            <option value=\"panda\">Panda</option>\n            <option value=\"tiger\">Tiger</option>\n            <option value=\"peacock\">Peacock</option>\n          </select>\n\n          {error && <p className=\"error-text\">{error}</p>}\n          <button className=\"btn btn-like\" type=\"submit\" disabled={loading}>\n            {loading ? 'Saving...' : 'Save and Continue'}\n          </button>\n        </form>\n      </section>\n    </main>\n  );\n};\n\nexport default OnboardingPage;\n","import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport AvatarBadge from '../components/AvatarBadge';\nimport { getApiErrorMessage, getUserProfileById } from '../services/api';\nimport { ViewerProfileDetails } from '../types';\n\nconst UserProfilePage: React.FC = () => {\n  const params: any = useParams();\n  const userId = params.userId || '';\n  const [details, setDetails] = useState<ViewerProfileDetails | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const load = async (): Promise<void> => {\n      setLoading(true);\n      setError('');\n      try {\n        const data = await getUserProfileById(userId);\n        setDetails(data);\n      } catch (err) {\n        setError(getApiErrorMessage(err, 'Could not load profile'));\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (userId) {\n      void load();\n    }\n  }, [userId]);\n\n  if (loading) {\n    return <div className=\"page-shell\"><p>Loading profile...</p></div>;\n  }\n\n  if (error || !details) {\n    return <div className=\"page-shell\"><p className=\"error-text\">{error || 'Profile unavailable'}</p></div>;\n  }\n\n  return (\n    <div className=\"page-shell\">\n      <div className=\"page-head\">\n        <h1>{details.user.name}&apos;s Profile</h1>\n      </div>\n\n      <div className=\"trust-panel\">\n        <AvatarBadge avatarKey={details.user.avatarKey} name={details.user.name} size={72} />\n        <div>\n          <p className=\"muted\">{details.user.location}</p>\n          <p className=\"muted\">{details.user.gender.replace('_', ' ')}</p>\n        </div>\n      </div>\n\n      <div className=\"profile-body\" style={{ marginTop: 14 }}>\n        <p>{details.user.bio || 'No bio yet.'}</p>\n        <div className=\"tag-row\">\n          {(details.user.interests || []).map(interest => (\n            <span className=\"tag\" key={interest}>{interest}</span>\n          ))}\n        </div>\n      </div>\n\n      {details.canViewPrivatePhotos ? (\n        <div className=\"private-photo-grid\" style={{ marginTop: 14 }}>\n          {details.privatePhotos.map(photo => (\n            <img key={photo} src={photo} alt=\"Private profile\" className=\"private-photo\" />\n          ))}\n        </div>\n      ) : (\n        <p className=\"muted\" style={{ marginTop: 14 }}>\n          Private photos are locked until both users build trust and grant access.\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default UserProfilePage;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom';\nimport TopNav from './components/TopNav';\nimport AuthPage from './pages/AuthPage';\nimport ChatPage from './pages/ChatPage';\nimport DiscoverPage from './pages/DiscoverPage';\nimport HomePage from './pages/HomePage';\nimport MatchesPage from './pages/MatchesPage';\nimport MyProfilePage from './pages/MyProfilePage';\nimport OnboardingPage from './pages/OnboardingPage';\nimport UserProfilePage from './pages/UserProfilePage';\nimport { getApiErrorStatus, getProfile, setAuthToken } from './services/api';\nimport './styles/globals.css';\nimport { User } from './types';\n\nconst App: React.FC = () => {\n  const [token, setTokenState] = useState<string>(() => localStorage.getItem('dating_token') || '');\n  const [user, setUser] = useState<User | null>(null);\n  const [loadingUser, setLoadingUser] = useState(Boolean(token));\n  const [profileLoadError, setProfileLoadError] = useState('');\n  const [reloadTick, setReloadTick] = useState(0);\n\n  useEffect(() => {\n    setAuthToken(token || '');\n  }, [token]);\n\n  useEffect(() => {\n    const restoreUser = async (): Promise<void> => {\n      setProfileLoadError('');\n      if (!token) {\n        setUser(null);\n        setLoadingUser(false);\n        return;\n      }\n\n      try {\n        let profile: User | null = null;\n        for (let attempt = 0; attempt < 3; attempt += 1) {\n          try {\n            profile = await getProfile();\n            break;\n          } catch (error) {\n            const status = getApiErrorStatus(error);\n            if (status === 401 || status === 403) {\n              localStorage.removeItem('dating_token');\n              setTokenState('');\n              setUser(null);\n              setProfileLoadError('');\n              return;\n            }\n            await new Promise(resolve => setTimeout(resolve, 700 * (attempt + 1)));\n          }\n        }\n\n        if (!profile) {\n          setProfileLoadError('Unable to load your session right now. Please retry.');\n          return;\n        }\n\n        setUser(profile);\n      } finally {\n        setLoadingUser(false);\n      }\n    };\n\n    void restoreUser();\n  }, [token, reloadTick]);\n\n  const authenticated = useMemo(() => Boolean(token && user), [token, user]);\n  const needsOnboarding = Boolean(user && !user.onboardingCompleted);\n\n  const setToken = (nextToken: string): void => {\n    if (nextToken) {\n      localStorage.setItem('dating_token', nextToken);\n    } else {\n      localStorage.removeItem('dating_token');\n    }\n    setTokenState(nextToken);\n  };\n\n  const onAuthenticated = (nextToken: string, nextUser: User): void => {\n    setToken(nextToken);\n    setUser(nextUser);\n  };\n\n  const onOnboardingComplete = (updatedUser: User): void => {\n    setUser(updatedUser);\n  };\n\n  const logout = (): void => {\n    setToken('');\n    setUser(null);\n  };\n\n  if (loadingUser) {\n    return <div className=\"loading-shell\">Loading your profile...</div>;\n  }\n\n  if (profileLoadError && token) {\n    return (\n      <div className=\"loading-shell\">\n        <div>\n          <p>{profileLoadError}</p>\n          <button className=\"btn btn-like\" onClick={() => {\n            setLoadingUser(true);\n            setReloadTick(prev => prev + 1);\n          }}>\n            Retry\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <BrowserRouter>\n      {authenticated && !needsOnboarding && <TopNav onLogout={logout} />}\n\n      <Switch>\n        <Route path=\"/auth\">\n          {authenticated ? (\n            <Redirect to={needsOnboarding ? '/onboarding' : '/discover'} />\n          ) : (\n            <AuthPage onAuthenticated={onAuthenticated} />\n          )}\n        </Route>\n\n        <Route path=\"/home\">\n          {authenticated ? <Redirect to={needsOnboarding ? '/onboarding' : '/discover'} /> : <HomePage />}\n        </Route>\n\n        <Route path=\"/onboarding\">\n          {authenticated && user ? (\n            needsOnboarding ? (\n              <OnboardingPage user={user} onComplete={onOnboardingComplete} />\n            ) : (\n              <Redirect to=\"/discover\" />\n            )\n          ) : (\n            <Redirect to=\"/auth\" />\n          )} \n        </Route>\n\n        <Route path=\"/discover\">\n          {authenticated ? (\n            needsOnboarding ? (\n              <Redirect to=\"/onboarding\" />\n            ) : (\n              <DiscoverPage />\n            )\n          ) : (\n            <Redirect to=\"/auth\" />\n          )}\n        </Route>\n\n        <Route path=\"/matches\">\n          {authenticated ? (\n            needsOnboarding ? (\n              <Redirect to=\"/onboarding\" />\n            ) : (\n              <MatchesPage />\n            )\n          ) : (\n            <Redirect to=\"/auth\" />\n          )}\n        </Route>\n\n        <Route path=\"/profile\" exact>\n          {authenticated && user ? (\n            needsOnboarding ? (\n              <Redirect to=\"/onboarding\" />\n            ) : (\n              <MyProfilePage onUserUpdated={onOnboardingComplete} />\n            )\n          ) : (\n            <Redirect to=\"/auth\" />\n          )}\n        </Route>\n\n        <Route path=\"/profile/:userId\">\n          {authenticated ? (\n            needsOnboarding ? (\n              <Redirect to=\"/onboarding\" />\n            ) : (\n              <UserProfilePage />\n            )\n          ) : (\n            <Redirect to=\"/auth\" />\n          )}\n        </Route>\n\n        <Route path=\"/chat/:matchUserId\">\n          {authenticated && user ? (\n            needsOnboarding ? (\n              <Redirect to=\"/onboarding\" />\n            ) : (\n              <ChatPage userId={user.id} />\n            )\n          ) : (\n            <Redirect to=\"/auth\" />\n          )}\n        </Route>\n\n        <Route path=\"/\">\n          <Redirect to={authenticated ? (needsOnboarding ? '/onboarding' : '/discover') : '/home'} />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}