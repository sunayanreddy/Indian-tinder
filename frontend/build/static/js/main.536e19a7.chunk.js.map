{"version":3,"sources":["components/BrandLogo.tsx","components/TopNav.tsx","services/api.ts","pages/AuthPage.tsx","components/AvatarBadge.tsx","pages/ChatPage.tsx","components/MatchModal.tsx","components/SwipeCard.tsx","pages/DiscoverPage.tsx","pages/HomePage.tsx","pages/MatchesPage.tsx","pages/OnboardingPage.tsx","App.tsx","index.tsx"],"names":["BrandLogo","_ref","compact","_jsxs","className","concat","children","_jsx","TopNav","onLogout","location","useLocation","Link","pathname","to","onClick","API_BASE_URL","process","REACT_APP_API_URL","authToken","client","axios","create","baseURL","timeout","interceptors","request","use","config","headers","_objectSpread","Authorization","response","error","friendly","Error","getErrorMessage","fallback","_error$response","_error$response2","responseData","data","serverMessage","message","trim","status","Object","defineProperty","value","enumerable","configurable","Promise","reject","getProfile","async","get","getMatches","getMessages","params","matchUserId","sendTyping","toUserId","isTyping","post","getApiErrorMessage","getApiErrorStatus","Number","defaultRegisterState","name","email","password","AuthPage","onAuthenticated","getInitialMode","URLSearchParams","window","search","mode","setMode","useState","setEmail","setPassword","setName","setError","loading","setLoading","googleClientId","REACT_APP_GOOGLE_CLIENT_ID","useEffect","scriptId","document","getElementById","script","createElement","src","defer","id","onload","googleApi","google","accounts","initialize","client_id","callback","result","idToken","loginWithGoogle","credential","token","user","err","container","innerHTML","renderButton","theme","size","shape","text","body","appendChild","submitLogin","login","submitRegister","payload","register","type","onSubmit","event","preventDefault","onChange","e","target","placeholder","required","disabled","AVATAR_MAP","fox","emoji","bg","lotus","lion","falcon","panda","tiger","peacock","AvatarBadge","avatarKey","title","style","width","height","background","fontSize","Math","floor","ChatPage","userId","useParams","messages","setMessages","targetMatch","setTargetMatch","draft","setDraft","setIsTyping","privatePhotos","setPrivatePhotos","photoError","setPhotoError","loadChat","allMatches","chatMessages","all","matchedUser","find","match","canViewPrivatePhotos","photos","getPrivatePhotos","source","createEventsSource","tokenParam","encodeURIComponent","EventSource","addEventListener","raw","JSON","parse","fromUserId","prev","some","existing","typing","Boolean","_match$user","onerror","close","timeoutId","setTimeout","length","clearTimeout","send","sendMessage","grantAccess","grantPhotoAccess","sortedMessages","useMemo","sort","a","b","createdAt","localeCompare","messageCount","isEligibleToGrantPhotoAccess","hasGrantedPhotoAccess","map","Date","toLocaleTimeString","photo","alt","onKeyDown","key","MatchModal","onClose","role","SwipeCard","onLike","onPass","age","gender","replace","bio","occupation","education","lookingFor","relationshipGoal","interests","interest","DiscoverPage","profiles","setProfiles","setMatch","loadProfiles","users","discoverUsers","handleSwipe","targetUserId","action","swipeUser","filter","profile","matched","topProfile","HomePage","backgroundImage","MatchesPage","matches","setMatches","loadMatches","_match$lastMessage","lastMessage","matchId","normalizeGender","normalizeLifestyle","OnboardingPage","onComplete","setAge","setGender","setBio","setLocation","setInterests","join","setLookingFor","setRelationshipGoal","setOccupation","setEducation","heightCm","setHeightCm","drinking","setDrinking","smoking","setSmoking","religion","setReligion","languages","setLanguages","setAvatarKey","interestList","split","item","languageList","updated","put","updateProfile","min","max","normalizeLookingFor","normalizeRelationshipGoal","rows","App","setTokenState","localStorage","getItem","setUser","loadingUser","setLoadingUser","profileLoadError","setProfileLoadError","reloadTick","setReloadTick","setAuthToken","attempt","removeItem","resolve","restoreUser","authenticated","needsOnboarding","onboardingCompleted","setToken","nextToken","setItem","BrowserRouter","logout","Switch","Route","path","Redirect","nextUser","updatedUser","ReactDOM","render","React","StrictMode"],"mappings":"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","file":"static/js/main.536e19a7.chunk.js","sourcesContent":["import React from 'react';\n\ninterface BrandLogoProps {\n  compact?: boolean;\n}\n\nconst BrandLogo: React.FC<BrandLogoProps> = ({ compact = false }) => {\n  return (\n    <div className={`brand-logo ${compact ? 'compact' : ''}`}>\n      <span className=\"brand-mark\" aria-hidden=\"true\">\n        IT\n      </span>\n      <span className=\"brand-wordmark\">Indian Tinder</span>\n    </div>\n  );\n};\n\nexport default BrandLogo;\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport BrandLogo from './BrandLogo';\n\ninterface TopNavProps {\n  onLogout: () => void;\n}\n\nconst TopNav: React.FC<TopNavProps> = ({ onLogout }) => {\n  const location = useLocation();\n\n  return (\n    <header className=\"top-nav\">\n      <div className=\"brand\">\n        <BrandLogo compact />\n      </div>\n      <nav>\n        <Link className={location.pathname === '/discover' ? 'active-link' : ''} to=\"/discover\">\n          Discover\n        </Link>\n        <Link className={location.pathname === '/matches' ? 'active-link' : ''} to=\"/matches\">\n          Matches\n        </Link>\n      </nav>\n      <button className=\"btn btn-ghost\" onClick={onLogout}>\n        Logout\n      </button>\n    </header>\n  );\n};\n\nexport default TopNav;\n","import axios from 'axios';\nimport {\n  AuthResponse,\n  ChatMessage,\n  Gender,\n  LifestyleHabit,\n  LookingFor,\n  MatchSummary,\n  RelationshipGoal,\n  SwipeResponse,\n  TypingEvent,\n  User\n} from '../types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\nlet authToken = '';\n\nconst client = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000\n});\n\nclient.interceptors.request.use(config => {\n  if (authToken) {\n    config.headers = {\n      ...config.headers,\n      Authorization: `Bearer ${authToken}`\n    };\n  }\n  return config;\n});\n\nconst getErrorMessage = (error: any, fallback: string): string => {\n  const responseData = error?.response?.data;\n  const serverMessage =\n    (responseData && typeof responseData.message === 'string' && responseData.message) ||\n    (responseData && typeof responseData.error === 'string' && responseData.error) ||\n    (typeof responseData === 'string' ? responseData : '');\n  if (typeof serverMessage === 'string' && serverMessage.trim()) {\n    return serverMessage;\n  }\n\n  if (error?.message === 'Network Error') {\n    return 'Unable to reach server. Please check your connection and try again.';\n  }\n\n  if (error?.response?.status === 400) {\n    return 'Invalid input. Please check your details and try again.';\n  }\n\n  return fallback;\n};\n\nclient.interceptors.response.use(\n  response => response,\n  error => {\n    const friendly = new Error(getErrorMessage(error, 'Request failed'));\n    Object.defineProperty(friendly, 'status', {\n      value: error && error.response ? error.response.status : 0,\n      enumerable: false,\n      configurable: true\n    });\n    return Promise.reject(friendly);\n  }\n);\n\nexport const setAuthToken = (token: string): void => {\n  authToken = token;\n};\n\nexport const createEventsSource = (): EventSource => {\n  const tokenParam = encodeURIComponent(authToken);\n  return new EventSource(`${API_BASE_URL}/events?token=${tokenParam}`);\n};\n\nexport interface RegisterInput {\n  name: string;\n  email: string;\n  password: string;\n}\n\nexport interface ProfileInput {\n  name: string;\n  age: number;\n  gender: Gender;\n  bio: string;\n  location: string;\n  interests: string[];\n  avatarKey: string;\n  lookingFor: LookingFor;\n  relationshipGoal: RelationshipGoal;\n  occupation: string;\n  education: string;\n  heightCm: number;\n  drinking: LifestyleHabit;\n  smoking: LifestyleHabit;\n  religion: string;\n  languages: string[];\n  privatePhotos: string[];\n}\n\nexport const register = async (payload: RegisterInput): Promise<AuthResponse> => {\n  const response = await client.post<AuthResponse>('/auth/register', payload);\n  return response.data;\n};\n\nexport const login = async (email: string, password: string): Promise<AuthResponse> => {\n  const response = await client.post<AuthResponse>('/auth/login', { email, password });\n  return response.data;\n};\n\nexport const loginWithGoogle = async (idToken: string): Promise<AuthResponse> => {\n  const response = await client.post<AuthResponse>('/auth/google', { idToken });\n  return response.data;\n};\n\nexport const getProfile = async (): Promise<User> => {\n  const response = await client.get<User>('/users/me');\n  return response.data;\n};\n\nexport const updateProfile = async (payload: ProfileInput): Promise<User> => {\n  const response = await client.put<User>('/users/me/profile', payload);\n  return response.data;\n};\n\nexport const discoverUsers = async (): Promise<User[]> => {\n  const response = await client.get<User[]>('/users/discover');\n  return response.data;\n};\n\nexport const swipeUser = async (\n  targetUserId: string,\n  action: 'like' | 'pass'\n): Promise<SwipeResponse> => {\n  const response = await client.post<SwipeResponse>('/swipes', {\n    targetUserId,\n    action\n  });\n  return response.data;\n};\n\nexport const getMatches = async (): Promise<MatchSummary[]> => {\n  const response = await client.get<MatchSummary[]>('/matches');\n  return response.data;\n};\n\nexport const grantPhotoAccess = async (matchUserId: string): Promise<{ ok: boolean }> => {\n  const response = await client.post<{ ok: boolean }>(`/matches/${matchUserId}/grant-photo-access`);\n  return response.data;\n};\n\nexport const getPrivatePhotos = async (matchUserId: string): Promise<string[]> => {\n  const response = await client.get<{ photos: string[] }>(`/matches/${matchUserId}/private-photos`);\n  return response.data.photos;\n};\n\nexport const getMessages = async (matchUserId: string): Promise<ChatMessage[]> => {\n  const response = await client.get<ChatMessage[]>('/messages', {\n    params: {\n      matchUserId\n    }\n  });\n  return response.data;\n};\n\nexport const sendMessage = async (toUserId: string, text: string): Promise<ChatMessage> => {\n  const response = await client.post<ChatMessage>('/messages', {\n    toUserId,\n    text\n  });\n  return response.data;\n};\n\nexport const sendTyping = async (toUserId: string, isTyping: boolean): Promise<{ ok: boolean }> => {\n  const response = await client.post<{ ok: boolean }>('/typing', {\n    toUserId,\n    isTyping\n  });\n  return response.data;\n};\n\nexport const parseTypingEvent = (raw: string): TypingEvent => {\n  const parsed: any = JSON.parse(raw);\n  return parsed;\n};\n\nexport const parseMessageEvent = (raw: string): ChatMessage => {\n  const parsed: any = JSON.parse(raw);\n  return parsed;\n};\n\nexport const parseMatchEvent = (raw: string): MatchSummary => {\n  const parsed: any = JSON.parse(raw);\n  return parsed;\n};\n\nexport const getApiErrorMessage = (error: any, fallback: string): string => {\n  if (error?.message && typeof error.message === 'string') {\n    return error.message;\n  }\n  return fallback;\n};\n\nexport const getApiErrorStatus = (error: any): number => {\n  return Number(error?.status || 0);\n};\n","import React, { useEffect, useState } from 'react';\nimport BrandLogo from '../components/BrandLogo';\nimport {\n  getApiErrorMessage,\n  login,\n  loginWithGoogle,\n  register,\n  RegisterInput\n} from '../services/api';\nimport { User } from '../types';\n\ninterface AuthPageProps {\n  onAuthenticated: (token: string, user: User) => void;\n}\n\nconst defaultRegisterState: RegisterInput = {\n  name: '',\n  email: '',\n  password: ''\n};\n\nconst AuthPage: React.FC<AuthPageProps> = ({ onAuthenticated }) => {\n  const getInitialMode = (): 'login' | 'register' => {\n    const params = new URLSearchParams(window.location.search);\n    return params.get('mode') === 'register' ? 'register' : 'login';\n  };\n\n  const [mode, setMode] = useState<'login' | 'register'>(getInitialMode);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const googleClientId = process.env.REACT_APP_GOOGLE_CLIENT_ID || '';\n\n  useEffect(() => {\n    setMode(getInitialMode());\n  }, []);\n\n  useEffect(() => {\n    if (!googleClientId) {\n      return;\n    }\n\n    const scriptId = 'google-identity-script';\n    if (!document.getElementById(scriptId)) {\n      const script = document.createElement('script');\n      script.src = 'https://accounts.google.com/gsi/client';\n      script.async = true;\n      script.defer = true;\n      script.id = scriptId;\n      script.onload = () => {\n        // @ts-ignore - Google Identity script injects this global\n        const googleApi = window.google;\n        if (googleApi) {\n          googleApi.accounts.id.initialize({\n            client_id: googleClientId,\n            callback: async (response: any) => {\n              try {\n                const result = await loginWithGoogle(response.credential);\n                onAuthenticated(result.token, result.user);\n              } catch (err) {\n                setError(getApiErrorMessage(err, 'Google login failed'));\n              }\n            }\n          });\n          const container = document.getElementById('google-signin-button');\n          if (container) {\n            container.innerHTML = '';\n            googleApi.accounts.id.renderButton(container, {\n              theme: 'outline',\n              size: 'large',\n              shape: 'pill',\n              text: 'continue_with'\n            });\n          }\n        }\n      };\n      document.body.appendChild(script);\n    }\n  }, [googleClientId, onAuthenticated]);\n\n  const submitLogin = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const result = await login(email, password);\n      onAuthenticated(result.token, result.user);\n    } catch (err) {\n      setError(getApiErrorMessage(err, 'Login failed'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const submitRegister = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n\n    const payload: RegisterInput = {\n      ...defaultRegisterState,\n      name,\n      email,\n      password\n    };\n\n    try {\n      const result = await register(payload);\n      onAuthenticated(result.token, result.user);\n    } catch (err) {\n      setError(getApiErrorMessage(err, 'Registration failed'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (event: React.FormEvent): Promise<void> => {\n    event.preventDefault();\n    if (mode === 'login') {\n      await submitLogin();\n      return;\n    }\n    await submitRegister();\n  };\n\n  return (\n    <main className=\"auth-layout\">\n      <section className=\"auth-shell\">\n        <aside className=\"auth-side\">\n          <BrandLogo />\n          <h2>Secure dating built on trust, not pressure</h2>\n          <p>\n            Start with private profiles, match with people who share your intent, and choose when to unlock photos.\n          </p>\n          <ul className=\"auth-benefits\">\n            <li>Google and email sign-in</li>\n            <li>Intent and compatibility-first profile flow</li>\n            <li>Photo access only by explicit consent</li>\n          </ul>\n        </aside>\n\n        <div className=\"auth-panel\">\n          <h1>{mode === 'login' ? 'Welcome Back' : 'Create Your Account'}</h1>\n          <p>Use Gmail/Google or email login. Private photos unlock only with consent after meaningful chat.</p>\n          <div className=\"auth-toggle\">\n            <button\n              className={`btn ${mode === 'login' ? 'btn-like' : 'btn-ghost'}`}\n              type=\"button\"\n              onClick={() => setMode('login')}\n            >\n              Login\n            </button>\n            <button\n              className={`btn ${mode === 'register' ? 'btn-like' : 'btn-ghost'}`}\n              type=\"button\"\n              onClick={() => setMode('register')}\n            >\n              Register\n            </button>\n          </div>\n\n          <form className=\"auth-form\" onSubmit={handleSubmit}>\n            {mode === 'register' && (\n              <input\n                value={name}\n                onChange={e => setName(e.target.value)}\n                type=\"text\"\n                placeholder=\"Full name\"\n                required\n              />\n            )}\n\n            <input\n              value={email}\n              onChange={e => setEmail(e.target.value)}\n              type=\"email\"\n              placeholder=\"Email\"\n              required\n            />\n            <input\n              value={password}\n              onChange={e => setPassword(e.target.value)}\n              type=\"password\"\n              placeholder=\"Password\"\n              required\n            />\n\n            {error && <p className=\"error-text\">{error}</p>}\n\n            <button className=\"btn btn-like\" type=\"submit\" disabled={loading}>\n              {loading ? 'Please wait...' : mode === 'login' ? 'Login' : 'Create Account'}\n            </button>\n          </form>\n\n          {googleClientId ? (\n            <div className=\"google-wrap\">\n              <p className=\"muted\">or continue with Google</p>\n              <div id=\"google-signin-button\" />\n            </div>\n          ) : null}\n        </div>\n      </section>\n    </main>\n  );\n};\n\nexport default AuthPage;\n","import React from 'react';\n\ninterface AvatarBadgeProps {\n  avatarKey: string;\n  name: string;\n  size?: number;\n}\n\nconst AVATAR_MAP: Record<string, { emoji: string; bg: string }> = {\n  fox: { emoji: 'ü¶ä', bg: '#fee2e2' },\n  lotus: { emoji: 'ü™∑', bg: '#fce7f3' },\n  lion: { emoji: 'ü¶Å', bg: '#fde68a' },\n  falcon: { emoji: 'ü¶Ö', bg: '#dbeafe' },\n  panda: { emoji: 'üêº', bg: '#e5e7eb' },\n  tiger: { emoji: 'üêØ', bg: '#ffedd5' },\n  peacock: { emoji: 'ü¶ö', bg: '#dcfce7' }\n};\n\nconst AvatarBadge: React.FC<AvatarBadgeProps> = ({ avatarKey, name, size = 56 }) => {\n  const config = AVATAR_MAP[avatarKey] || AVATAR_MAP.fox;\n\n  return (\n    <div\n      className=\"avatar-badge\"\n      title={`${name}'s avatar`}\n      style={{ width: size, height: size, background: config.bg }}\n    >\n      <span style={{ fontSize: Math.floor(size * 0.45) }}>{config.emoji}</span>\n    </div>\n  );\n};\n\nexport default AvatarBadge;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport AvatarBadge from '../components/AvatarBadge';\nimport {\n  createEventsSource,\n  getMatches,\n  getMessages,\n  getPrivatePhotos,\n  grantPhotoAccess,\n  parseMatchEvent,\n  parseMessageEvent,\n  parseTypingEvent,\n  sendMessage,\n  sendTyping\n} from '../services/api';\nimport { ChatMessage, MatchSummary } from '../types';\n\ninterface ChatPageProps {\n  userId: string;\n}\n\nconst ChatPage: React.FC<ChatPageProps> = ({ userId }) => {\n  const params: any = useParams();\n  const matchUserId = params.matchUserId || '';\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [targetMatch, setTargetMatch] = useState<MatchSummary | null>(null);\n  const [draft, setDraft] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [privatePhotos, setPrivatePhotos] = useState<string[]>([]);\n  const [photoError, setPhotoError] = useState('');\n\n  const loadChat = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const [allMatches, chatMessages] = await Promise.all([getMatches(), getMessages(matchUserId)]);\n      const matchedUser = allMatches.find(match => match.user.id === matchUserId) || null;\n      if (!matchedUser) {\n        setError('Match not found.');\n      }\n      setTargetMatch(matchedUser);\n      setMessages(chatMessages);\n\n      if (matchedUser?.canViewPrivatePhotos) {\n        try {\n          const photos = await getPrivatePhotos(matchUserId);\n          setPrivatePhotos(photos);\n          setPhotoError('');\n        } catch (err) {\n          setPhotoError(err instanceof Error ? err.message : 'Could not load private photos');\n        }\n      } else {\n        setPrivatePhotos([]);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Unable to load chat');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadChat();\n  }, [matchUserId]);\n\n  useEffect(() => {\n    const source = createEventsSource();\n\n    source.addEventListener('message', (event: MessageEvent) => {\n      const message = parseMessageEvent(event.data);\n      const belongsToThread =\n        (message.fromUserId === userId && message.toUserId === matchUserId) ||\n        (message.fromUserId === matchUserId && message.toUserId === userId);\n\n      if (belongsToThread) {\n        setMessages(prev => {\n          if (prev.some(existing => existing.id === message.id)) {\n            return prev;\n          }\n          return [...prev, message];\n        });\n      }\n    });\n\n    source.addEventListener('typing', (event: MessageEvent) => {\n      const typing = parseTypingEvent(event.data);\n      if (typing.fromUserId === matchUserId) {\n        setIsTyping(Boolean(typing.isTyping));\n      }\n    });\n\n    source.addEventListener('match', (event: MessageEvent) => {\n      const match = parseMatchEvent(event.data);\n      if (match?.user?.id === matchUserId) {\n        setTargetMatch(match);\n      }\n    });\n\n    source.onerror = () => {\n      source.close();\n    };\n\n    return () => {\n      source.close();\n    };\n  }, [matchUserId, userId]);\n\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      void sendTyping(matchUserId, draft.trim().length > 0);\n    }, 250);\n\n    return () => clearTimeout(timeoutId);\n  }, [draft, matchUserId]);\n\n  const send = async (): Promise<void> => {\n    if (!draft.trim()) {\n      return;\n    }\n\n    try {\n      await sendMessage(matchUserId, draft);\n      setDraft('');\n      void sendTyping(matchUserId, false);\n      void loadChat();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to send message');\n    }\n  };\n\n  const grantAccess = async (): Promise<void> => {\n    try {\n      await grantPhotoAccess(matchUserId);\n      await loadChat();\n    } catch (err) {\n      setPhotoError(err instanceof Error ? err.message : 'Unable to grant photo access');\n    }\n  };\n\n  const sortedMessages = useMemo(\n    () => [...messages].sort((a, b) => a.createdAt.localeCompare(b.createdAt)),\n    [messages]\n  );\n\n  return (\n    <div className=\"page-shell chat-shell\">\n      <div className=\"page-head\">\n        <h1>{targetMatch ? `Chat with ${targetMatch.user.name}` : 'Chat'}</h1>\n        <Link className=\"btn btn-ghost\" to=\"/matches\">\n          Back\n        </Link>\n      </div>\n\n      {targetMatch && (\n        <div className=\"trust-panel\">\n          <AvatarBadge avatarKey={targetMatch.user.avatarKey} name={targetMatch.user.name} size={64} />\n          <div>\n            <p className=\"muted\">Trust progress: {targetMatch.messageCount}/8 messages</p>\n            {!targetMatch.canViewPrivatePhotos && (\n              <p className=\"muted\">Private photos unlock only after enough chat and explicit permission.</p>\n            )}\n            {targetMatch.isEligibleToGrantPhotoAccess && !targetMatch.hasGrantedPhotoAccess && (\n              <button className=\"btn btn-ghost\" onClick={() => void grantAccess()}>\n                Grant Your Photo Access\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n\n      <div className=\"chat-expiry-notice\">\n        Chats auto-delete after 24 hours to protect your privacy.\n      </div>\n\n      {loading && <p>Loading conversation...</p>}\n      {error && <p className=\"error-text\">{error}</p>}\n\n      <div className=\"chat-thread\">\n        {sortedMessages.map(message => (\n          <div\n            key={message.id}\n            className={`message-bubble ${message.fromUserId === userId ? 'mine' : 'theirs'}`}\n          >\n            <p>{message.text}</p>\n            <span>{new Date(message.createdAt).toLocaleTimeString()}</span>\n          </div>\n        ))}\n      </div>\n\n      {isTyping && <p className=\"typing-indicator\">{targetMatch?.user.name || 'They'} is typing...</p>}\n\n      {targetMatch?.canViewPrivatePhotos && (\n        <div className=\"private-photo-grid\">\n          {privatePhotos.map(photo => (\n            <img key={photo} src={photo} alt=\"Private profile\" className=\"private-photo\" />\n          ))}\n        </div>\n      )}\n      {photoError && <p className=\"error-text\">{photoError}</p>}\n\n      <div className=\"chat-input-row\">\n        <input\n          value={draft}\n          onChange={event => setDraft(event.target.value)}\n          placeholder=\"Write your message...\"\n          onKeyDown={event => {\n            if (event.key === 'Enter') {\n              void send();\n            }\n          }}\n        />\n        <button className=\"btn btn-like\" onClick={() => void send()}>\n          Send\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatPage;\n","import React from 'react';\nimport { MatchSummary } from '../types';\nimport AvatarBadge from './AvatarBadge';\n\ninterface MatchModalProps {\n  match: MatchSummary;\n  onClose: () => void;\n}\n\nconst MatchModal: React.FC<MatchModalProps> = ({ match, onClose }) => {\n  return (\n    <div className=\"overlay\" role=\"dialog\" aria-modal=\"true\">\n      <div className=\"modal\">\n        <h2>It&apos;s a Match</h2>\n        <AvatarBadge avatarKey={match.user.avatarKey} name={match.user.name} size={120} />\n        <p>\n          You and <strong>{match.user.name}</strong> liked each other.\n        </p>\n        <p className=\"muted\">Keep chatting to build trust and unlock private photos with consent.</p>\n        <button className=\"btn btn-like\" onClick={onClose}>\n          Continue\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default MatchModal;\n","import React from 'react';\nimport { User } from '../types';\nimport AvatarBadge from './AvatarBadge';\n\ninterface SwipeCardProps {\n  user: User;\n  onLike: () => void;\n  onPass: () => void;\n}\n\nconst SwipeCard: React.FC<SwipeCardProps> = ({ user, onLike, onPass }) => {\n  return (\n    <article className=\"profile-card\">\n      <div className=\"avatar-panel\">\n        <AvatarBadge avatarKey={user.avatarKey} name={user.name} size={160} />\n        <p className=\"muted\">Private photos stay hidden until both trust each other.</p>\n      </div>\n      <div className=\"profile-body\">\n        <h2>\n          {user.name}, {user.age}\n        </h2>\n        <p className=\"profile-location\">\n          {user.location} ¬∑ {user.gender.replace('_', ' ')}\n        </p>\n        <p>{user.bio || 'No bio yet.'}</p>\n        <p className=\"muted\">\n          {user.occupation} ¬∑ {user.education}\n        </p>\n        <p className=\"muted\">\n          Looking for {user.lookingFor.replace('_', ' ')} ¬∑ Goal: {user.relationshipGoal.replace('_', ' ')}\n        </p>\n        <div className=\"tag-row\">\n          {user.interests.map(interest => (\n            <span className=\"tag\" key={interest}>\n              {interest}\n            </span>\n          ))}\n        </div>\n        <div className=\"action-row\">\n          <button className=\"btn btn-pass\" onClick={onPass}>\n            Pass\n          </button>\n          <button className=\"btn btn-like\" onClick={onLike}>\n            Like\n          </button>\n        </div>\n      </div>\n    </article>\n  );\n};\n\nexport default SwipeCard;\n","import React, { useEffect, useState } from 'react';\nimport MatchModal from '../components/MatchModal';\nimport SwipeCard from '../components/SwipeCard';\nimport { discoverUsers, swipeUser } from '../services/api';\nimport { MatchSummary, User } from '../types';\n\nconst DiscoverPage: React.FC = () => {\n  const [profiles, setProfiles] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [match, setMatch] = useState<MatchSummary | null>(null);\n\n  const loadProfiles = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const users = await discoverUsers();\n      setProfiles(users);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load profiles');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadProfiles();\n  }, []);\n\n  const handleSwipe = async (targetUserId: string, action: 'like' | 'pass'): Promise<void> => {\n    try {\n      const result = await swipeUser(targetUserId, action);\n      setProfiles(prev => prev.filter(profile => profile.id !== targetUserId));\n      if (result.matched && result.match) {\n        setMatch(result.match);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Swipe failed');\n    }\n  };\n\n  const topProfile = profiles[0];\n\n  return (\n    <div className=\"page-shell\">\n      <h1>Discover</h1>\n      {loading && <p>Loading profiles...</p>}\n      {error && <p className=\"error-text\">{error}</p>}\n\n      {!loading && !topProfile && <p>No new profiles right now. Check back soon.</p>}\n\n      {topProfile && (\n        <SwipeCard\n          user={topProfile}\n          onPass={() => handleSwipe(topProfile.id, 'pass')}\n          onLike={() => handleSwipe(topProfile.id, 'like')}\n        />\n      )}\n\n      {match && <MatchModal match={match} onClose={() => setMatch(null)} />}\n    </div>\n  );\n};\n\nexport default DiscoverPage;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport BrandLogo from '../components/BrandLogo';\n\nconst HomePage: React.FC = () => {\n  const heroVisualStyle = {\n    backgroundImage:\n      \"linear-gradient(190deg, rgba(9, 14, 22, 0.12), rgba(9, 14, 22, 0.28)), url('/landing-couple.png')\"\n  };\n\n  return (\n    <main className=\"landing-page\">\n      <header className=\"landing-header\">\n        <div className=\"landing-brand\">\n          <BrandLogo />\n        </div>\n        <nav className=\"landing-actions\">\n          <Link className=\"btn btn-ghost\" to=\"/auth?mode=login\">\n            Login\n          </Link>\n          <Link className=\"btn btn-like\" to=\"/auth?mode=register\">\n            Sign Up\n          </Link>\n        </nav>\n      </header>\n\n      <section className=\"landing-hero\">\n        <div className=\"landing-copy\">\n          <p className=\"landing-kicker\">Date Blind, Build trust and become friends.</p>\n          <h1>Date Blind, Build trust and become friends.</h1>\n          <p>\n            Match through personality-first profiles and avatars. Unlock photos only after both people connect,\n            chat, and consent.\n          </p>\n          <div className=\"landing-cta-row\">\n            <Link className=\"btn btn-like\" to=\"/auth?mode=register\">\n              Start Dating\n            </Link>\n            <Link className=\"btn btn-ghost\" to=\"/auth?mode=login\">\n              I Have an Account\n            </Link>\n          </div>\n          <div className=\"landing-stats\">\n            <div className=\"stat-card\">\n              <h3>Consent-first</h3>\n              <p>Private images remain locked until both users grant access.</p>\n            </div>\n            <div className=\"stat-card\">\n              <h3>Avatar-led Discovery</h3>\n              <p>Match through values and vibe before appearance.</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"landing-visual\" style={heroVisualStyle} role=\"img\" aria-label=\"Blind date visual\" />\n      </section>\n\n      <section className=\"feature-grid\">\n        <article className=\"feature-card\">\n          <h3>Intent-led Profiles</h3>\n          <p>\n            Set your relationship goals, preferences, lifestyle, and key details so every connection starts with\n            clarity.\n          </p>\n        </article>\n        <article className=\"feature-card\">\n          <h3>Smart Match Journey</h3>\n          <p>\n            Discover profiles, match instantly on mutual likes, and move into focused one-to-one conversation.\n          </p>\n        </article>\n        <article className=\"feature-card\">\n          <h3>Trust Unlock Layer</h3>\n          <p>\n            Photos are shared only after meaningful conversation and explicit permission from the profile owner.\n          </p>\n        </article>\n      </section>\n    </main>\n  );\n};\n\nexport default HomePage;\n","import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport AvatarBadge from '../components/AvatarBadge';\nimport { getMatches } from '../services/api';\nimport { MatchSummary } from '../types';\n\nconst MatchesPage: React.FC = () => {\n  const [matches, setMatches] = useState<MatchSummary[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  const loadMatches = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const data = await getMatches();\n      setMatches(data);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load matches');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadMatches();\n  }, []);\n\n  return (\n    <div className=\"page-shell\">\n      <div className=\"page-head\">\n        <h1>Connections</h1>\n        <button className=\"btn btn-ghost\" onClick={() => void loadMatches()}>\n          Refresh\n        </button>\n      </div>\n\n      {loading && <p>Loading your connections...</p>}\n      {error && <p className=\"error-text\">{error}</p>}\n\n      {!loading && matches.length === 0 && <p>You have no matches yet. Start swiping.</p>}\n\n      <div className=\"match-list\">\n        {matches.map(match => (\n          <Link className=\"match-item\" key={match.matchId} to={`/chat/${match.user.id}`}>\n            <AvatarBadge avatarKey={match.user.avatarKey} name={match.user.name} size={56} />\n            <div>\n              <h3>{match.user.name}</h3>\n              <p>{match.lastMessage?.text || 'You are now connected. Say hi.'}</p>\n              <small className=\"muted\">Messages: {match.messageCount}</small>\n            </div>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default MatchesPage;\n","import React, { useState } from 'react';\nimport { updateProfile } from '../services/api';\nimport { Gender, LifestyleHabit, LookingFor, RelationshipGoal, User } from '../types';\n\ninterface OnboardingPageProps {\n  user: User;\n  onComplete: (user: User) => void;\n}\n\nconst normalizeGender = (value: string): Gender => {\n  switch (value) {\n    case 'man':\n      return 'man';\n    case 'woman':\n      return 'woman';\n    case 'non_binary':\n      return 'non_binary';\n    case 'other':\n      return 'other';\n    default:\n      return 'prefer_not_say';\n  }\n};\n\nconst normalizeLookingFor = (value: string): LookingFor => {\n  switch (value) {\n    case 'man':\n    case 'woman':\n    case 'non_binary':\n    case 'everyone':\n      return value;\n    default:\n      return 'prefer_not_say';\n  }\n};\n\nconst normalizeRelationshipGoal = (value: string): RelationshipGoal => {\n  switch (value) {\n    case 'short_term':\n    case 'marriage':\n    case 'friendship':\n      return value;\n    default:\n      return 'long_term';\n  }\n};\n\nconst normalizeLifestyle = (value: string): LifestyleHabit => {\n  switch (value) {\n    case 'never':\n    case 'occasionally':\n    case 'socially':\n    case 'regularly':\n      return value;\n    default:\n      return 'prefer_not_say';\n  }\n};\n\nconst OnboardingPage: React.FC<OnboardingPageProps> = ({ user, onComplete }) => {\n  const [name, setName] = useState(user.name || '');\n  const [age, setAge] = useState(user.age || 21);\n  const [gender, setGender] = useState<string>(user.gender || 'prefer_not_say');\n  const [bio, setBio] = useState(user.bio || '');\n  const [location, setLocation] = useState(user.location || '');\n  const [interests, setInterests] = useState((user.interests || []).join(', '));\n  const [lookingFor, setLookingFor] = useState<LookingFor>(user.lookingFor || 'prefer_not_say');\n  const [relationshipGoal, setRelationshipGoal] = useState<RelationshipGoal>(\n    user.relationshipGoal || 'long_term'\n  );\n  const [occupation, setOccupation] = useState(user.occupation || '');\n  const [education, setEducation] = useState(user.education || '');\n  const [heightCm, setHeightCm] = useState(user.heightCm || 170);\n  const [drinking, setDrinking] = useState<LifestyleHabit>(user.drinking || 'prefer_not_say');\n  const [smoking, setSmoking] = useState<LifestyleHabit>(user.smoking || 'prefer_not_say');\n  const [religion, setReligion] = useState(user.religion || '');\n  const [languages, setLanguages] = useState((user.languages || []).join(', '));\n  const [avatarKey, setAvatarKey] = useState(user.avatarKey || 'fox');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const submit = async (event: React.FormEvent): Promise<void> => {\n    event.preventDefault();\n    setError('');\n    setLoading(true);\n\n    const interestList = interests\n      .split(',')\n      .map(item => item.trim())\n      .filter(Boolean);\n    const languageList = languages\n      .split(',')\n      .map(item => item.trim())\n      .filter(Boolean);\n\n    if (interestList.length < 3) {\n      setError('Please add at least 3 interests.');\n      setLoading(false);\n      return;\n    }\n    if (languageList.length < 1) {\n      setError('Please add at least 1 language.');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const updated = await updateProfile({\n        name,\n        age,\n        gender: normalizeGender(gender),\n        bio,\n        location,\n        interests: interestList,\n        avatarKey,\n        lookingFor,\n        relationshipGoal,\n        occupation,\n        education,\n        heightCm,\n        drinking,\n        smoking,\n        religion,\n        languages: languageList,\n        privatePhotos: []\n      });\n      onComplete(updated);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save profile');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <main className=\"auth-layout\">\n      <section className=\"auth-panel\">\n        <h1>Complete Your Profile</h1>\n        <p>Fill all details to get better matches. Only your avatar is public until photo access is granted.</p>\n\n        <form className=\"auth-form\" onSubmit={submit}>\n          <input value={name} onChange={e => setName(e.target.value)} placeholder=\"Name\" required />\n          <div className=\"grid-two\">\n            <input\n              type=\"number\"\n              min={18}\n              max={80}\n              value={age}\n              onChange={e => setAge(Number(e.target.value))}\n              placeholder=\"Age\"\n              required\n            />\n            <select value={gender} onChange={e => setGender(e.target.value)}>\n              <option value=\"man\">Man</option>\n              <option value=\"woman\">Woman</option>\n              <option value=\"non_binary\">Non-binary</option>\n              <option value=\"other\">Other</option>\n              <option value=\"prefer_not_say\">Prefer not to say</option>\n            </select>\n          </div>\n          <div className=\"grid-two\">\n            <select value={lookingFor} onChange={e => setLookingFor(normalizeLookingFor(e.target.value))}>\n              <option value=\"man\">Looking for Men</option>\n              <option value=\"woman\">Looking for Women</option>\n              <option value=\"non_binary\">Looking for Non-binary</option>\n              <option value=\"everyone\">Looking for Everyone</option>\n              <option value=\"prefer_not_say\">Prefer not to say</option>\n            </select>\n            <select\n              value={relationshipGoal}\n              onChange={e => setRelationshipGoal(normalizeRelationshipGoal(e.target.value))}\n            >\n              <option value=\"long_term\">Long-term relationship</option>\n              <option value=\"short_term\">Short-term dating</option>\n              <option value=\"marriage\">Marriage</option>\n              <option value=\"friendship\">Friendship first</option>\n            </select>\n          </div>\n          <input value={location} onChange={e => setLocation(e.target.value)} placeholder=\"Location\" required />\n          <textarea value={bio} onChange={e => setBio(e.target.value)} placeholder=\"Bio\" rows={3} required />\n          <div className=\"grid-two\">\n            <input\n              value={occupation}\n              onChange={e => setOccupation(e.target.value)}\n              placeholder=\"Occupation\"\n              required\n            />\n            <input\n              value={education}\n              onChange={e => setEducation(e.target.value)}\n              placeholder=\"Education\"\n              required\n            />\n          </div>\n          <div className=\"grid-two\">\n            <input\n              type=\"number\"\n              min={120}\n              max={230}\n              value={heightCm}\n              onChange={e => setHeightCm(Number(e.target.value))}\n              placeholder=\"Height (cm)\"\n              required\n            />\n            <input value={religion} onChange={e => setReligion(e.target.value)} placeholder=\"Religion\" required />\n          </div>\n          <div className=\"grid-two\">\n            <select value={drinking} onChange={e => setDrinking(normalizeLifestyle(e.target.value))}>\n              <option value=\"never\">Drinking: Never</option>\n              <option value=\"occasionally\">Drinking: Occasionally</option>\n              <option value=\"socially\">Drinking: Socially</option>\n              <option value=\"regularly\">Drinking: Regularly</option>\n              <option value=\"prefer_not_say\">Drinking: Prefer not to say</option>\n            </select>\n            <select value={smoking} onChange={e => setSmoking(normalizeLifestyle(e.target.value))}>\n              <option value=\"never\">Smoking: Never</option>\n              <option value=\"occasionally\">Smoking: Occasionally</option>\n              <option value=\"socially\">Smoking: Socially</option>\n              <option value=\"regularly\">Smoking: Regularly</option>\n              <option value=\"prefer_not_say\">Smoking: Prefer not to say</option>\n            </select>\n          </div>\n          <input\n            value={interests}\n            onChange={e => setInterests(e.target.value)}\n            placeholder=\"Interests (comma separated, minimum 3)\"\n            required\n          />\n          <input\n            value={languages}\n            onChange={e => setLanguages(e.target.value)}\n            placeholder=\"Languages spoken (comma separated)\"\n            required\n          />\n          <select value={avatarKey} onChange={e => setAvatarKey(e.target.value)}>\n            <option value=\"fox\">Fox</option>\n            <option value=\"lotus\">Lotus</option>\n            <option value=\"lion\">Lion</option>\n            <option value=\"falcon\">Falcon</option>\n            <option value=\"panda\">Panda</option>\n            <option value=\"tiger\">Tiger</option>\n            <option value=\"peacock\">Peacock</option>\n          </select>\n\n          {error && <p className=\"error-text\">{error}</p>}\n          <button className=\"btn btn-like\" type=\"submit\" disabled={loading}>\n            {loading ? 'Saving...' : 'Save and Continue'}\n          </button>\n        </form>\n      </section>\n    </main>\n  );\n};\n\nexport default OnboardingPage;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom';\nimport TopNav from './components/TopNav';\nimport AuthPage from './pages/AuthPage';\nimport ChatPage from './pages/ChatPage';\nimport DiscoverPage from './pages/DiscoverPage';\nimport HomePage from './pages/HomePage';\nimport MatchesPage from './pages/MatchesPage';\nimport OnboardingPage from './pages/OnboardingPage';\nimport { getApiErrorStatus, getProfile, setAuthToken } from './services/api';\nimport './styles/globals.css';\nimport { User } from './types';\n\nconst App: React.FC = () => {\n  const [token, setTokenState] = useState<string>(() => localStorage.getItem('dating_token') || '');\n  const [user, setUser] = useState<User | null>(null);\n  const [loadingUser, setLoadingUser] = useState(Boolean(token));\n  const [profileLoadError, setProfileLoadError] = useState('');\n  const [reloadTick, setReloadTick] = useState(0);\n\n  useEffect(() => {\n    setAuthToken(token || '');\n  }, [token]);\n\n  useEffect(() => {\n    const restoreUser = async (): Promise<void> => {\n      setProfileLoadError('');\n      if (!token) {\n        setUser(null);\n        setLoadingUser(false);\n        return;\n      }\n\n      try {\n        let profile: User | null = null;\n        for (let attempt = 0; attempt < 3; attempt += 1) {\n          try {\n            profile = await getProfile();\n            break;\n          } catch (error) {\n            const status = getApiErrorStatus(error);\n            if (status === 401 || status === 403) {\n              localStorage.removeItem('dating_token');\n              setTokenState('');\n              setUser(null);\n              setProfileLoadError('');\n              return;\n            }\n            await new Promise(resolve => setTimeout(resolve, 700 * (attempt + 1)));\n          }\n        }\n\n        if (!profile) {\n          setProfileLoadError('Unable to load your session right now. Please retry.');\n          return;\n        }\n\n        setUser(profile);\n      } finally {\n        setLoadingUser(false);\n      }\n    };\n\n    void restoreUser();\n  }, [token, reloadTick]);\n\n  const authenticated = useMemo(() => Boolean(token && user), [token, user]);\n  const needsOnboarding = Boolean(user && !user.onboardingCompleted);\n\n  const setToken = (nextToken: string): void => {\n    if (nextToken) {\n      localStorage.setItem('dating_token', nextToken);\n    } else {\n      localStorage.removeItem('dating_token');\n    }\n    setTokenState(nextToken);\n  };\n\n  const onAuthenticated = (nextToken: string, nextUser: User): void => {\n    setToken(nextToken);\n    setUser(nextUser);\n  };\n\n  const onOnboardingComplete = (updatedUser: User): void => {\n    setUser(updatedUser);\n  };\n\n  const logout = (): void => {\n    setToken('');\n    setUser(null);\n  };\n\n  if (loadingUser) {\n    return <div className=\"loading-shell\">Loading your profile...</div>;\n  }\n\n  if (profileLoadError && token) {\n    return (\n      <div className=\"loading-shell\">\n        <div>\n          <p>{profileLoadError}</p>\n          <button className=\"btn btn-like\" onClick={() => {\n            setLoadingUser(true);\n            setReloadTick(prev => prev + 1);\n          }}>\n            Retry\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <BrowserRouter>\n      {authenticated && !needsOnboarding && <TopNav onLogout={logout} />}\n\n      <Switch>\n        <Route path=\"/auth\">\n          {authenticated ? (\n            <Redirect to={needsOnboarding ? '/onboarding' : '/discover'} />\n          ) : (\n            <AuthPage onAuthenticated={onAuthenticated} />\n          )}\n        </Route>\n\n        <Route path=\"/home\">\n          {authenticated ? <Redirect to={needsOnboarding ? '/onboarding' : '/discover'} /> : <HomePage />}\n        </Route>\n\n        <Route path=\"/onboarding\">\n          {authenticated && user ? (\n            needsOnboarding ? (\n              <OnboardingPage user={user} onComplete={onOnboardingComplete} />\n            ) : (\n              <Redirect to=\"/discover\" />\n            )\n          ) : (\n            <Redirect to=\"/auth\" />\n          )} \n        </Route>\n\n        <Route path=\"/discover\">\n          {authenticated ? (\n            needsOnboarding ? (\n              <Redirect to=\"/onboarding\" />\n            ) : (\n              <DiscoverPage />\n            )\n          ) : (\n            <Redirect to=\"/auth\" />\n          )}\n        </Route>\n\n        <Route path=\"/matches\">\n          {authenticated ? (\n            needsOnboarding ? (\n              <Redirect to=\"/onboarding\" />\n            ) : (\n              <MatchesPage />\n            )\n          ) : (\n            <Redirect to=\"/auth\" />\n          )}\n        </Route>\n\n        <Route path=\"/chat/:matchUserId\">\n          {authenticated && user ? (\n            needsOnboarding ? (\n              <Redirect to=\"/onboarding\" />\n            ) : (\n              <ChatPage userId={user.id} />\n            )\n          ) : (\n            <Redirect to=\"/auth\" />\n          )}\n        </Route>\n\n        <Route path=\"/\">\n          <Redirect to={authenticated ? (needsOnboarding ? '/onboarding' : '/discover') : '/home'} />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}