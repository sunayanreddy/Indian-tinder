{"version":3,"sources":["components/TopNav.tsx","services/api.ts","pages/AuthPage.tsx","pages/ChatPage.tsx","components/MatchModal.tsx","components/SwipeCard.tsx","pages/DiscoverPage.tsx","pages/MatchesPage.tsx","App.tsx","index.tsx"],"names":["TopNav","_ref","onLogout","location","useLocation","_jsxs","className","children","_jsx","Link","pathname","to","onClick","API_BASE_URL","process","REACT_APP_API_URL","authToken","client","axios","create","baseURL","timeout","interceptors","request","use","config","headers","_objectSpread","Authorization","concat","getMatches","async","get","data","getMessages","params","matchUserId","sendTyping","toUserId","isTyping","post","defaultRegisterState","name","email","password","age","bio","interests","AuthPage","onAuthenticated","mode","setMode","useState","setEmail","setPassword","setName","setAge","setBio","setLocation","setInterests","error","setError","loading","setLoading","demoTip","useMemo","submitLogin","result","login","token","user","err","Error","message","submitRegister","payload","split","map","item","trim","filter","Boolean","register","type","onSubmit","event","preventDefault","_Fragment","value","onChange","e","target","placeholder","required","Number","min","max","disabled","ChatPage","userId","useParams","messages","setMessages","targetMatch","setTargetMatch","draft","setDraft","setIsTyping","useEffect","allMatches","chatMessages","Promise","all","matchedUser","find","match","id","loadChat","source","createEventsSource","tokenParam","encodeURIComponent","EventSource","addEventListener","raw","JSON","parse","fromUserId","prev","some","existing","typing","_match$user","onerror","close","timeoutId","setTimeout","length","clearTimeout","send","text","sendMessage","sortedMessages","sort","a","b","createdAt","localeCompare","Date","toLocaleTimeString","onKeyDown","key","MatchModal","onClose","role","src","avatarUrl","alt","SwipeCard","onLike","onPass","interest","DiscoverPage","profiles","setProfiles","setMatch","loadProfiles","users","discoverUsers","handleSwipe","targetUserId","action","swipeUser","profile","matched","topProfile","MatchesPage","matches","setMatches","loadMatches","_match$lastMessage","lastMessage","matchId","App","setTokenState","localStorage","getItem","setUser","loadingUser","setLoadingUser","setAuthToken","getProfile","_err","removeItem","restoreUser","authenticated","setToken","nextToken","setItem","BrowserRouter","logout","Switch","Route","path","Redirect","nextUser","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bfef08b5.chunk.js","sourcesContent":["import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\ninterface TopNavProps {\n  onLogout: () => void;\n}\n\nconst TopNav: React.FC<TopNavProps> = ({ onLogout }) => {\n  const location = useLocation();\n\n  return (\n    <header className=\"top-nav\">\n      <div className=\"brand\">Indian Tinder Pro</div>\n      <nav>\n        <Link className={location.pathname === '/discover' ? 'active-link' : ''} to=\"/discover\">\n          Discover\n        </Link>\n        <Link className={location.pathname === '/matches' ? 'active-link' : ''} to=\"/matches\">\n          Matches\n        </Link>\n      </nav>\n      <button className=\"btn btn-ghost\" onClick={onLogout}>\n        Logout\n      </button>\n    </header>\n  );\n};\n\nexport default TopNav;\n","import axios from 'axios';\nimport {\n  AuthResponse,\n  ChatMessage,\n  MatchSummary,\n  SwipeResponse,\n  TypingEvent,\n  User\n} from '../types';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5001/api';\nlet authToken = '';\n\nconst client = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000\n});\n\nclient.interceptors.request.use(config => {\n  if (authToken) {\n    config.headers = {\n      ...config.headers,\n      Authorization: `Bearer ${authToken}`\n    };\n  }\n  return config;\n});\n\nexport const setAuthToken = (token: string): void => {\n  authToken = token;\n};\n\nexport const createEventsSource = (): EventSource => {\n  const tokenParam = encodeURIComponent(authToken);\n  return new EventSource(`${API_BASE_URL}/events?token=${tokenParam}`);\n};\n\nexport interface RegisterInput {\n  name: string;\n  email: string;\n  password: string;\n  age: number;\n  bio: string;\n  location: string;\n  interests: string[];\n  avatarUrl?: string;\n}\n\nexport const register = async (payload: RegisterInput): Promise<AuthResponse> => {\n  const response = await client.post<AuthResponse>('/auth/register', payload);\n  return response.data;\n};\n\nexport const login = async (email: string, password: string): Promise<AuthResponse> => {\n  const response = await client.post<AuthResponse>('/auth/login', { email, password });\n  return response.data;\n};\n\nexport const getProfile = async (): Promise<User> => {\n  const response = await client.get<User>('/users/me');\n  return response.data;\n};\n\nexport const discoverUsers = async (): Promise<User[]> => {\n  const response = await client.get<User[]>('/users/discover');\n  return response.data;\n};\n\nexport const swipeUser = async (\n  targetUserId: string,\n  action: 'like' | 'pass'\n): Promise<SwipeResponse> => {\n  const response = await client.post<SwipeResponse>('/swipes', {\n    targetUserId,\n    action\n  });\n  return response.data;\n};\n\nexport const getMatches = async (): Promise<MatchSummary[]> => {\n  const response = await client.get<MatchSummary[]>('/matches');\n  return response.data;\n};\n\nexport const getMessages = async (matchUserId: string): Promise<ChatMessage[]> => {\n  const response = await client.get<ChatMessage[]>('/messages', {\n    params: {\n      matchUserId\n    }\n  });\n  return response.data;\n};\n\nexport const sendMessage = async (toUserId: string, text: string): Promise<ChatMessage> => {\n  const response = await client.post<ChatMessage>('/messages', {\n    toUserId,\n    text\n  });\n  return response.data;\n};\n\nexport const sendTyping = async (toUserId: string, isTyping: boolean): Promise<{ ok: boolean }> => {\n  const response = await client.post<{ ok: boolean }>('/typing', {\n    toUserId,\n    isTyping\n  });\n  return response.data;\n};\n\nexport const parseTypingEvent = (raw: string): TypingEvent => {\n  const parsed: any = JSON.parse(raw);\n  return parsed;\n};\n\nexport const parseMessageEvent = (raw: string): ChatMessage => {\n  const parsed: any = JSON.parse(raw);\n  return parsed;\n};\n\nexport const parseMatchEvent = (raw: string): MatchSummary => {\n  const parsed: any = JSON.parse(raw);\n  return parsed;\n};\n","import React, { useMemo, useState } from 'react';\nimport { login, register, RegisterInput } from '../services/api';\nimport { User } from '../types';\n\ninterface AuthPageProps {\n  onAuthenticated: (token: string, user: User) => void;\n}\n\nconst defaultRegisterState: RegisterInput = {\n  name: '',\n  email: '',\n  password: '',\n  age: 25,\n  bio: '',\n  location: '',\n  interests: []\n};\n\nconst AuthPage: React.FC<AuthPageProps> = ({ onAuthenticated }) => {\n  const [mode, setMode] = useState<'login' | 'register'>('login');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [name, setName] = useState('');\n  const [age, setAge] = useState(25);\n  const [bio, setBio] = useState('');\n  const [location, setLocation] = useState('');\n  const [interests, setInterests] = useState('travel, food, music');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const demoTip = useMemo(\n    () => 'Demo account: isha@example.com / password123',\n    []\n  );\n\n  const submitLogin = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const result = await login(email, password);\n      onAuthenticated(result.token, result.user);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const submitRegister = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n\n    const payload: RegisterInput = {\n      ...defaultRegisterState,\n      name,\n      email,\n      password,\n      age,\n      bio,\n      location,\n      interests: interests\n        .split(',')\n        .map(item => item.trim())\n        .filter(Boolean)\n    };\n\n    try {\n      const result = await register(payload);\n      onAuthenticated(result.token, result.user);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Registration failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (event: React.FormEvent): Promise<void> => {\n    event.preventDefault();\n    if (mode === 'login') {\n      await submitLogin();\n      return;\n    }\n    await submitRegister();\n  };\n\n  return (\n    <main className=\"auth-layout\">\n      <section className=\"auth-panel\">\n        <h1>Indian Tinder Pro</h1>\n        <p>Meet people, get matched, and start meaningful conversations.</p>\n        <div className=\"auth-toggle\">\n          <button\n            className={`btn ${mode === 'login' ? 'btn-like' : 'btn-ghost'}`}\n            type=\"button\"\n            onClick={() => setMode('login')}\n          >\n            Login\n          </button>\n          <button\n            className={`btn ${mode === 'register' ? 'btn-like' : 'btn-ghost'}`}\n            type=\"button\"\n            onClick={() => setMode('register')}\n          >\n            Register\n          </button>\n        </div>\n\n        <form className=\"auth-form\" onSubmit={handleSubmit}>\n          {mode === 'register' && (\n            <>\n              <input\n                value={name}\n                onChange={e => setName(e.target.value)}\n                type=\"text\"\n                placeholder=\"Full name\"\n                required\n              />\n              <div className=\"grid-two\">\n                <input\n                  value={age}\n                  onChange={e => setAge(Number(e.target.value))}\n                  type=\"number\"\n                  min={18}\n                  max={70}\n                  placeholder=\"Age\"\n                  required\n                />\n                <input\n                  value={location}\n                  onChange={e => setLocation(e.target.value)}\n                  type=\"text\"\n                  placeholder=\"City\"\n                  required\n                />\n              </div>\n              <input\n                value={bio}\n                onChange={e => setBio(e.target.value)}\n                type=\"text\"\n                placeholder=\"Bio\"\n                required\n              />\n              <input\n                value={interests}\n                onChange={e => setInterests(e.target.value)}\n                type=\"text\"\n                placeholder=\"Interests separated by commas\"\n                required\n              />\n            </>\n          )}\n\n          <input\n            value={email}\n            onChange={e => setEmail(e.target.value)}\n            type=\"email\"\n            placeholder=\"Email\"\n            required\n          />\n          <input\n            value={password}\n            onChange={e => setPassword(e.target.value)}\n            type=\"password\"\n            placeholder=\"Password\"\n            required\n          />\n\n          {error && <p className=\"error-text\">{error}</p>}\n\n          <button className=\"btn btn-like\" type=\"submit\" disabled={loading}>\n            {loading ? 'Please wait...' : mode === 'login' ? 'Login' : 'Create Account'}\n          </button>\n        </form>\n\n        <p className=\"muted\">{demoTip}</p>\n      </section>\n    </main>\n  );\n};\n\nexport default AuthPage;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport {\n  createEventsSource,\n  getMatches,\n  getMessages,\n  parseMatchEvent,\n  parseMessageEvent,\n  parseTypingEvent,\n  sendMessage,\n  sendTyping\n} from '../services/api';\nimport { ChatMessage, MatchSummary } from '../types';\n\ninterface ChatPageProps {\n  userId: string;\n}\n\nconst ChatPage: React.FC<ChatPageProps> = ({ userId }) => {\n  const params: any = useParams();\n  const matchUserId = params.matchUserId || '';\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const [targetMatch, setTargetMatch] = useState<MatchSummary | null>(null);\n  const [draft, setDraft] = useState('');\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n\n  const loadChat = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const [allMatches, chatMessages] = await Promise.all([getMatches(), getMessages(matchUserId)]);\n      const matchedUser = allMatches.find(match => match.user.id === matchUserId) || null;\n      if (!matchedUser) {\n        setError('Match not found.');\n      }\n      setTargetMatch(matchedUser);\n      setMessages(chatMessages);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Unable to load chat');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadChat();\n  }, [matchUserId]);\n\n  useEffect(() => {\n    const source = createEventsSource();\n\n    source.addEventListener('message', (event: MessageEvent) => {\n      const message = parseMessageEvent(event.data);\n      const belongsToThread =\n        (message.fromUserId === userId && message.toUserId === matchUserId) ||\n        (message.fromUserId === matchUserId && message.toUserId === userId);\n\n      if (belongsToThread) {\n        setMessages(prev => {\n          if (prev.some(existing => existing.id === message.id)) {\n            return prev;\n          }\n          return [...prev, message];\n        });\n      }\n    });\n\n    source.addEventListener('typing', (event: MessageEvent) => {\n      const typing = parseTypingEvent(event.data);\n      if (typing.fromUserId === matchUserId) {\n        setIsTyping(Boolean(typing.isTyping));\n      }\n    });\n\n    source.addEventListener('match', (event: MessageEvent) => {\n      const match = parseMatchEvent(event.data);\n      if (match?.user?.id === matchUserId) {\n        setTargetMatch(match);\n      }\n    });\n\n    source.onerror = () => {\n      source.close();\n    };\n\n    return () => {\n      source.close();\n    };\n  }, [matchUserId, userId]);\n\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      void sendTyping(matchUserId, draft.trim().length > 0);\n    }, 200);\n\n    return () => clearTimeout(timeoutId);\n  }, [draft, matchUserId]);\n\n  const send = async (): Promise<void> => {\n    if (!draft.trim()) {\n      return;\n    }\n\n    try {\n      await sendMessage(matchUserId, draft);\n      setDraft('');\n      void sendTyping(matchUserId, false);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to send message');\n    }\n  };\n\n  const sortedMessages = useMemo(\n    () => [...messages].sort((a, b) => a.createdAt.localeCompare(b.createdAt)),\n    [messages]\n  );\n\n  return (\n    <div className=\"page-shell chat-shell\">\n      <div className=\"page-head\">\n        <h1>{targetMatch ? `Chat with ${targetMatch.user.name}` : 'Chat'}</h1>\n        <Link className=\"btn btn-ghost\" to=\"/matches\">\n          Back\n        </Link>\n      </div>\n\n      {loading && <p>Loading conversation...</p>}\n      {error && <p className=\"error-text\">{error}</p>}\n\n      <div className=\"chat-thread\">\n        {sortedMessages.map(message => (\n          <div\n            key={message.id}\n            className={`message-bubble ${message.fromUserId === userId ? 'mine' : 'theirs'}`}\n          >\n            <p>{message.text}</p>\n            <span>{new Date(message.createdAt).toLocaleTimeString()}</span>\n          </div>\n        ))}\n      </div>\n\n      {isTyping && <p className=\"typing-indicator\">{targetMatch?.user.name || 'They'} is typing...</p>}\n\n      <div className=\"chat-input-row\">\n        <input\n          value={draft}\n          onChange={event => setDraft(event.target.value)}\n          placeholder=\"Write your message...\"\n          onKeyDown={event => {\n            if (event.key === 'Enter') {\n              void send();\n            }\n          }}\n        />\n        <button className=\"btn btn-like\" onClick={() => void send()}>\n          Send\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatPage;\n","import React from 'react';\nimport { MatchSummary } from '../types';\n\ninterface MatchModalProps {\n  match: MatchSummary;\n  onClose: () => void;\n}\n\nconst MatchModal: React.FC<MatchModalProps> = ({ match, onClose }) => {\n  return (\n    <div className=\"overlay\" role=\"dialog\" aria-modal=\"true\">\n      <div className=\"modal\">\n        <h2>It&apos;s a Match</h2>\n        <img src={match.user.avatarUrl} alt={match.user.name} className=\"match-avatar\" />\n        <p>\n          You and <strong>{match.user.name}</strong> liked each other.\n        </p>\n        <button className=\"btn btn-like\" onClick={onClose}>\n          Continue\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default MatchModal;\n","import React from 'react';\nimport { User } from '../types';\n\ninterface SwipeCardProps {\n  user: User;\n  onLike: () => void;\n  onPass: () => void;\n}\n\nconst SwipeCard: React.FC<SwipeCardProps> = ({ user, onLike, onPass }) => {\n  return (\n    <article className=\"profile-card\">\n      <img src={user.avatarUrl} alt={user.name} className=\"profile-image\" />\n      <div className=\"profile-body\">\n        <h2>\n          {user.name}, {user.age}\n        </h2>\n        <p className=\"profile-location\">{user.location}</p>\n        <p>{user.bio}</p>\n        <div className=\"tag-row\">\n          {user.interests.map(interest => (\n            <span className=\"tag\" key={interest}>\n              {interest}\n            </span>\n          ))}\n        </div>\n        <div className=\"action-row\">\n          <button className=\"btn btn-pass\" onClick={onPass}>\n            Pass\n          </button>\n          <button className=\"btn btn-like\" onClick={onLike}>\n            Like\n          </button>\n        </div>\n      </div>\n    </article>\n  );\n};\n\nexport default SwipeCard;\n","import React, { useEffect, useState } from 'react';\nimport MatchModal from '../components/MatchModal';\nimport SwipeCard from '../components/SwipeCard';\nimport { discoverUsers, swipeUser } from '../services/api';\nimport { MatchSummary, User } from '../types';\n\nconst DiscoverPage: React.FC = () => {\n  const [profiles, setProfiles] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [match, setMatch] = useState<MatchSummary | null>(null);\n\n  const loadProfiles = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const users = await discoverUsers();\n      setProfiles(users);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load profiles');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadProfiles();\n  }, []);\n\n  const handleSwipe = async (targetUserId: string, action: 'like' | 'pass'): Promise<void> => {\n    try {\n      const result = await swipeUser(targetUserId, action);\n      setProfiles(prev => prev.filter(profile => profile.id !== targetUserId));\n      if (result.matched && result.match) {\n        setMatch(result.match);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Swipe failed');\n    }\n  };\n\n  const topProfile = profiles[0];\n\n  return (\n    <div className=\"page-shell\">\n      <h1>Discover</h1>\n      {loading && <p>Loading profiles...</p>}\n      {error && <p className=\"error-text\">{error}</p>}\n\n      {!loading && !topProfile && <p>No new profiles right now. Check back soon.</p>}\n\n      {topProfile && (\n        <SwipeCard\n          user={topProfile}\n          onPass={() => handleSwipe(topProfile.id, 'pass')}\n          onLike={() => handleSwipe(topProfile.id, 'like')}\n        />\n      )}\n\n      {match && <MatchModal match={match} onClose={() => setMatch(null)} />}\n    </div>\n  );\n};\n\nexport default DiscoverPage;\n","import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { getMatches } from '../services/api';\nimport { MatchSummary } from '../types';\n\nconst MatchesPage: React.FC = () => {\n  const [matches, setMatches] = useState<MatchSummary[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  const loadMatches = async (): Promise<void> => {\n    setLoading(true);\n    setError('');\n    try {\n      const data = await getMatches();\n      setMatches(data);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load matches');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    void loadMatches();\n  }, []);\n\n  return (\n    <div className=\"page-shell\">\n      <div className=\"page-head\">\n        <h1>Connections</h1>\n        <button className=\"btn btn-ghost\" onClick={() => void loadMatches()}>\n          Refresh\n        </button>\n      </div>\n\n      {loading && <p>Loading your connections...</p>}\n      {error && <p className=\"error-text\">{error}</p>}\n\n      {!loading && matches.length === 0 && <p>You have no matches yet. Start swiping.</p>}\n\n      <div className=\"match-list\">\n        {matches.map(match => (\n          <Link className=\"match-item\" key={match.matchId} to={`/chat/${match.user.id}`}>\n            <img src={match.user.avatarUrl} alt={match.user.name} />\n            <div>\n              <h3>{match.user.name}</h3>\n              <p>{match.lastMessage?.text || 'You are now connected. Say hi.'}</p>\n            </div>\n          </Link>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default MatchesPage;\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { BrowserRouter, Redirect, Route, Switch } from 'react-router-dom';\nimport TopNav from './components/TopNav';\nimport AuthPage from './pages/AuthPage';\nimport ChatPage from './pages/ChatPage';\nimport DiscoverPage from './pages/DiscoverPage';\nimport MatchesPage from './pages/MatchesPage';\nimport { getProfile, setAuthToken } from './services/api';\nimport './styles/globals.css';\nimport { User } from './types';\n\nconst App: React.FC = () => {\n  const [token, setTokenState] = useState<string>(() => localStorage.getItem('dating_token') || '');\n  const [user, setUser] = useState<User | null>(null);\n  const [loadingUser, setLoadingUser] = useState(Boolean(token));\n\n  useEffect(() => {\n    setAuthToken(token || '');\n  }, [token]);\n\n  useEffect(() => {\n    const restoreUser = async (): Promise<void> => {\n      if (!token) {\n        setUser(null);\n        setLoadingUser(false);\n        return;\n      }\n\n      try {\n        const profile = await getProfile();\n        setUser(profile);\n      } catch (_err) {\n        localStorage.removeItem('dating_token');\n        setTokenState('');\n        setUser(null);\n      } finally {\n        setLoadingUser(false);\n      }\n    };\n\n    void restoreUser();\n  }, [token]);\n\n  const authenticated = useMemo(() => Boolean(token && user), [token, user]);\n\n  const setToken = (nextToken: string): void => {\n    if (nextToken) {\n      localStorage.setItem('dating_token', nextToken);\n    } else {\n      localStorage.removeItem('dating_token');\n    }\n    setTokenState(nextToken);\n  };\n\n  const onAuthenticated = (nextToken: string, nextUser: User): void => {\n    setToken(nextToken);\n    setUser(nextUser);\n  };\n\n  const logout = (): void => {\n    setToken('');\n    setUser(null);\n  };\n\n  if (loadingUser) {\n    return <div className=\"loading-shell\">Loading your profile...</div>;\n  }\n\n  return (\n    <BrowserRouter>\n      {authenticated && <TopNav onLogout={logout} />}\n\n      <Switch>\n        <Route path=\"/auth\">\n          {authenticated ? <Redirect to=\"/discover\" /> : <AuthPage onAuthenticated={onAuthenticated} />}\n        </Route>\n\n        <Route path=\"/discover\">\n          {authenticated ? <DiscoverPage /> : <Redirect to=\"/auth\" />}\n        </Route>\n\n        <Route path=\"/matches\">\n          {authenticated ? <MatchesPage /> : <Redirect to=\"/auth\" />}\n        </Route>\n\n        <Route path=\"/chat/:matchUserId\">\n          {authenticated && user ? <ChatPage userId={user.id} /> : <Redirect to=\"/auth\" />}\n        </Route>\n\n        <Route path=\"/\">\n          <Redirect to={authenticated ? '/discover' : '/auth'} />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}